{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/keyboardHelpers.js","webpack:///./src/App.vue?fbb4","webpack:///./src/components/Loader.vue?9a35","webpack:///src/components/Loader.vue","webpack:///./src/components/Loader.vue?dfad","webpack:///./src/components/Loader.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/helpers.js","webpack:///./src/store.js","webpack:///./src/views/Dashboard.vue?94a0","webpack:///src/views/Dashboard.vue","webpack:///./src/views/Dashboard.vue?2310","webpack:///./src/views/Dashboard.vue","webpack:///./src/views/Note.vue?1f7f","webpack:///./src/components/BlockList.vue?8cc4","webpack:///src/components/BlockList.vue","webpack:///./src/components/BlockList.vue?19f6","webpack:///./src/components/BlockList.vue","webpack:///src/views/Note.vue","webpack:///./src/views/Note.vue?951c","webpack:///./src/views/Note.vue","webpack:///./src/views/Block.vue?0dd7","webpack:///src/views/Block.vue","webpack:///./src/views/Block.vue?3f04","webpack:///./src/views/Block.vue","webpack:///./src/views/Login.vue?a36f","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?09c2","webpack:///./src/views/Login.vue","webpack:///./src/views/Forgot.vue?1f38","webpack:///src/views/Forgot.vue","webpack:///./src/views/Forgot.vue?beb7","webpack:///./src/views/Forgot.vue","webpack:///./src/views/NewPassword.vue?9249","webpack:///src/views/NewPassword.vue","webpack:///./src/views/NewPassword.vue?d421","webpack:///./src/views/NewPassword.vue","webpack:///./src/router.js","webpack:///./src/main.js","webpack:///./src/components/Loader.vue?97fb","webpack:///./src/views/Dashboard.vue?b698","webpack:///./src/textareaHelpers.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","edited","timerSave","document","addEventListener","e","clearTimeout","setTimeout","saveAll","console","log","target","matches","removeTextareas","handleKeyBackspace","handleKeyDelete","shiftKey","ctrlKey","handleKeyCtrlEnter","handleKeyEnter","handleShiftTab","handleTab","handleKeyArrowUp","handleKeyArrowDown","revertHistory","altKey","block","closest","parent","parentNode","prev","previousSibling","removeChild","insertBefore","editBlock","isFirstLine","preventDefault","selectPrev","next","nextSibling","nextNext","appendChild","isLastLine","selectNext","textarea","text","substr","selectionStart","trim","li","createElement","setAttribute","getTempId","innerHTML","marked","selectionEnd","textareaDom","$","match","replace","setInputHeight","prevBlock","getPrevBlock","querySelector","oldvalue","nextBlock","getNextBlock","nextvalue","unmarked","ul","focus","tagName","parentBlock","reference","querySelectorAll","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","$route","fullPath","staticRenderFns","directives","rawName","expression","_m","_s","loadingMessage","_e","component","history","$$","selector","context","elements","Array","addHistory","JSON","stringify","pop","hydrate","note_id","getData","map","parent_id","getAttribute","id","order","getBlockOrder","temp_id","stopPropagation","blockDom","clickedBlock","tempId","Date","getTime","newBlock","container","clientX","getBoundingClientRect","x","clientY","y","clickPos","getSelection","getRangeAt","endOffset","updateBlocksRefs","block_id","removeAttribute","axios","method","url","then","res","catch","error","blocks","indexOf","index","pos","getCarretPosition","getSelectionEnd","getSelectionStart","build_html","level","output_html","forEach","saferEval","dataContext","Function","toastr","body","title","color","seconds","div","className","Vue","use","Vuex","Store","state","user","email","is_admin","authInitialized","intendedUrl","notes","note","oldText","editingBlockId","loading","mutations","startLoading","stopLoading","setLoadingMessage","payload","setIntendedUrl","setUser","setEditingBlockId","setOldText","actions","commit","message","bool","getNote","slug","dispatch","$router","finally","getters","postCreate","fn","postUpdate","postBatch","saveBlock","saveAndNew","moveUp","siblings","children","originalOrder","editPrev","moveDown","editNext","indent","newSiblings","unindent","find","cancelEditing","deleteBlock","removeBlock","prev_id","isAuthenticated","editingBlock_id","sort","filter","b","a","on","$event","newNote","domProps","composing","$set","_l","components","methods","getNotes","$store","created","setLayerHeight","type","_k","keyCode","handleEnter","project","domain","openModalDomain","openModalUnpublish","is_published","openModalPublish","params","project_id","tables","urladmin","page","output","removePage","newPage","openModalSaveTemplate","props","computed","isAdmin","modalTemplate","modalDomain","modalUnpublish","modalPublish","dataBr","getProject","mounted","onSubmitLogin","login","onSubmitRegister","register","password","onSubmit","token","Router","router","routes","path","Dashboard","meta","restricted","Login","Forgot","NewPassword","Note","Block","beforeEach","to","from","store","config","productionTip","vm","render","h","App","$mount","el","style","height","textareaHeight","scrollHeight","originalText","span","width","offsetWidth","inner","createTextNode","carret","time","offsetLeft","textContent","timeEnd","ret","offsetTop"],"mappings":"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","file":"js/app.62da3f1e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","window.edited = false;\nwindow.timerSave = null;\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n\n\tdocument.addEventListener('keydown',function(e){\n\n\t\tedited = true;\n\t\tclearTimeout(timerSave);\n\t\ttimerSave = setTimeout(()=>{\n\t\t\tif(!edited) return;\n\t\t\tsaveAll();\n\t\t\tedited = false;\n\t\t},5000);\n\n\n\t\tconsole.log(e.key)\n\t\tif(e.key=='Escape' && e.target.matches('textarea')){\n\t\t\tremoveTextareas();\n\t\t}\n\t\tif(e.key=='Backspace' && e.target.matches('textarea')){\n\t\t\thandleKeyBackspace(e);\n\t\t}\n\t\tif(e.key=='Delete' && e.target.matches('textarea')){\n\t\t\thandleKeyDelete(e);\n\t\t}\n\t\tif(e.key=='Enter' && e.target.matches('textarea') && !e.shiftKey){\n\t\t\tif(e.ctrlKey){\n\t\t\t\thandleKeyCtrlEnter(e);\n\t\t\t} else {\n\t\t\t\thandleKeyEnter(e);\n\t\t\t}\n\t\t}\n\t\tif(e.key=='Tab' && e.target.matches('textarea')){\n\t\t\tif(e.shiftKey){\n\t\t\t\thandleShiftTab(e);\n\t\t\t} else {\n\t\t\t\thandleTab(e);\n\t\t\t}\n\t\t}\n\n\t\tif(e.key=='ArrowUp' && e.target.matches('textarea')){ //arrowUp\n\t\t\thandleKeyArrowUp(e);\n\t\t}\n\t\tif(e.key=='ArrowDown' && e.target.matches('textarea')){ //arrowDown\n\t\t\thandleKeyArrowDown(e);\n\n\t\t}\n\t\tif(e.key=='z' && e.ctrlKey){\n\t\t\trevertHistory();\n\t\t}\n\n\t});\n});\n\nwindow.handleKeyArrowUp = function(e){\n\tif(e.shiftKey && e.altKey){\n\t\tvar block = e.target.closest('[data-block]');\n\t\tvar parent = block.parentNode;\n\t\tvar prev = block.previousSibling;\n\t\tif(!prev) return;\n\t\tparent.removeChild(block);\n\t\tparent.insertBefore(block,prev);\n\t\treturn editBlock(block);\n\t}\n\n\tif(isFirstLine(e.target)) {\n\t\te.preventDefault();\n\t\tselectPrev();\n\t}\n}\nwindow.handleKeyArrowDown = function(e){\n\n\tif(e.shiftKey && e.altKey){\n\t\tvar block = e.target.closest('[data-block]');\n\t\tvar parent = block.parentNode;\n\t\tvar next = block.nextSibling;\n\t\tif(!next) return;\n\t\tparent.removeChild(block);\n\t\tvar nextNext = next.nextSibling;\n\t\tif(nextNext){\n\t\t\tparent.insertBefore(block,nextNext);\n\t\t} else {\n\t\t\tparent.appendChild(block);\n\t\t}\n\t\treturn editBlock(block);\n\t}\n\n\tif(isLastLine(e.target)) {\n\t\te.preventDefault();\n\t\tselectNext();\n\t}\n}\n\nwindow.handleKeyEnter = function(e){\n\te.preventDefault();\n\tvar textarea = e.target;\n\tvar text = textarea.value;\n\ttextarea.value = text.substr(0,textarea.selectionStart).trim();\n\n\tvar block = textarea.closest('[data-block]');\n\tvar li = document.createElement('li');\n\tli.setAttribute('data-block','');\n\tli.setAttribute('data-temp-id',getTempId());\n\tvar p = document.createElement('p');\n\tp.innerHTML = marked(text.substr(textarea.selectionEnd).trim());\n\n\tli.appendChild(p);\n\tif(block.nextSibling){\n\t\tblock.parentNode.insertBefore(li,block.nextSibling);\n\t} else {\n\t\tblock.parentNode.appendChild(li);\n\t}\n\teditBlock(li);\n\tvar textareaDom = $('textarea');\n\ttextareaDom.selectionStart = 0;\n\ttextareaDom.selectionEnd = 0;\n}\n\nwindow.handleKeyCtrlEnter = function(e){\n\te.preventDefault();\n\tvar textarea = e.target;\n\tvar text = textarea.value;\n\n\tif (!text.match(/^\\[\\[(TODO|DONE)\\]\\]/)) {\n\t\ttext = \"[[TODO]] \" + text;\n\t} else if (text.match(/^\\[\\[TODO\\]\\]/)) {\n\t\ttext = text.replace(/^\\[\\[TODO\\]\\]/, \"[[DONE]]\");\n\t} else if (text.match(/^\\[\\[DONE\\]\\]/)) {\n\t\ttext = text.replace(/^\\[\\[DONE\\]\\] */, \"\");\n\t}\n\n\ttextarea.value = text;\n\tsetInputHeight(textarea);\n}\n\nwindow.handleKeyBackspace = function(e){\n\tvar textarea = e.target;\n\tif(textarea.selectionStart == 0 && textarea.selectionEnd==0) {\n\t\tvar block = textarea.closest('[data-block]');\n\n\t\t//grab text,\n\t\tvar text = textarea.value;\n\n\t\t//get previous\n\t\tvar prevBlock = getPrevBlock(block);\n\t\tif(!prevBlock) return;\n\n\t\te.preventDefault();\n\n\t\t//delete current block\n\t\tblock.parentNode.removeChild(block);\n\n\t\t//append text\n\t\teditBlock(prevBlock);\n\n\t\ttextarea = prevBlock.querySelector('textarea');\n\t\tvar oldvalue = textarea.value\n\t\ttextarea.value = oldvalue + text;\n\t\tsetInputHeight(textarea);\n\n\t\ttextarea.selectionStart = oldvalue.length;\n\t\ttextarea.selectionEnd = oldvalue.length;\n\n\n\t}\n}\n\nwindow.handleKeyDelete = function(e){\n\tvar textarea = e.target;\n\tif(textarea.selectionStart == textarea.value.length && textarea.selectionEnd==textarea.value.length) {\n\t\tvar block = textarea.closest('[data-block]');\n\n\t\t//get next block\n\t\tvar nextBlock = getNextBlock(block);\n\t\tif(!nextBlock) return;\n\n\t\te.preventDefault();\n\n\t\t//grab text,\n\t\tvar nextvalue = unmarked(nextBlock.querySelector('p').innerHTML);\n\n\t\t//delete next block\n\t\tnextBlock.parentNode.removeChild(nextBlock);\n\n\t\t//append text\n\n\t\tvar text = textarea.value;\n\t\ttextarea.value = text + nextvalue;\n\t\tsetInputHeight(textarea);\n\n\t\ttextarea.selectionStart = text.length;\n\t\ttextarea.selectionEnd = text.length;\n\n\t}\n}\n\n\n\nwindow.handleTab = function(e){\n\te.preventDefault();\n\tvar textarea = e.target;\n\tvar block = textarea.closest('[data-block]');\n\n\t//get prev\n\tvar prevBlock = block.previousSibling;\n\tif(!prevBlock) return;\n\n\tvar ul = prevBlock.querySelector('ul');\n\tif(!ul){\n\t\tul = document.createElement('ul');\n\t\tprevBlock.appendChild(ul);\n\t}\n\n\tblock.parentNode.removeChild(block);\n\n\tul.appendChild(block);\n\t$('textarea').focus();\n\n}\n\n\n\nwindow.handleShiftTab = function(e){\n\te.preventDefault();\n\tvar textarea = e.target;\n\tvar block = textarea.closest('[data-block]');\n\n\tvar ul = block.parentNode;\n\tif(ul.tagName!='UL') return;\n\n\tvar parentBlock = ul.closest('[data-block]');\n\n\tvar reference = parentBlock.nextSibling;\n\n\tul.removeChild(block);\n\tif(ul.querySelectorAll('li').length==0){\n\t\tparentBlock.removeChild(ul);\n\t}\n\n\tif(reference){\n\t\tparentBlock.parentNode.insertBefore(block,reference);\n\t} else {\n\t\tparentBlock.parentNode.appendChild(block);\n\t}\n\n\t$('textarea').focus();\n\n\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper-app\"},[_c('aside',[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"Dashboard\")])],1),_c('main',[_c('router-view',{key:_vm.$route.fullPath})],1),_c('loader')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"ajax-loader\"},[_vm._m(0),(_vm.loadingMessage)?_c('p',[_vm._v(_vm._s(_vm.loadingMessage))]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loader-circle\"},[_c('div',{staticClass:\"loader-line-mask\"},[_c('div',{staticClass:\"loader-line\"})]),_c('div',{staticClass:\"loader-img\"})])}]\n\nexport { render, staticRenderFns }","<template>\n\n\t<div v-show=\"isLoading\" class=\"ajax-loader\">\n\t\t<div class=\"loader-circle\">\n\t\t\t<div class=\"loader-line-mask\">\n\t\t\t\t<div class=\"loader-line\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"loader-img\"></div>\n\t\t</div>\n\t\t<p v-if=\"loadingMessage\">{{loadingMessage}}</p>\n\t</div>\n</template>\n\n<style>\n\n\n.ajax-loader {\n  position: fixed;\n  background: rgba(255,255,255,.7);\n  top:0;\n  left:0;\n  width: 100%;\n  height: 100%;\n  z-index: 999999;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color:#fff;\n}\n\n.ajax-loader .loader-circle {\n  position:relative;\n  width:120px;\n  height:120px;\n  border-radius: 50%;\n  box-shadow: inset 0 0 0 1px rgba(255,255,255,.1);\n}\n\n.ajax-loader .loader-line-mask {\n  position: absolute;\n  top:0;\n  left:0;\n  width:60px;\n  height:120px;\n  overflow: hidden;\n  transform-origin:60px 60px;\n  -webkit-mask-image: -webkit-linear-gradient(top, rgba(0,0,0,1), rgba(0,0,0,0));\n  animation: rotate 1.2s infinite linear;\n}\n.ajax-loader .loader-line {\n  width:120px;\n  height:120px;\n  border-radius: 50%;\n  box-shadow: inset 0 0 0 3px #000;\n}\n.ajax-loader .loader-img {\n  position: relative;\n  top: 30px;\n  left: 30px;\n  display: block;\n  width:60px;\n  height:60px;\n  /* background:url(../../public/logo.png) no-repeat center; */\n  background-size:contain;\n}\n.ajax-loader p{\n  font-weight: bold;\n  color:#000;\n  margin-top:20px;\n}\n@keyframes rotate {\n  0% { transform: rotate(0deg);}\n  100% { transform: rotate(360deg);}\n}\n\n\n\n\t</style>\n\n\n<script>\n\n\texport default {\n\t\tcomputed:{\n\n\t\t\tisLoading(){\n\t\t\t\treturn this.$store.state.loading\n\t\t\t},\n\t\t\tloadingMessage(){\n\t\t\t\treturn this.$store.state.loadingMessage\n\t\t\t}\n\n\t\t}\n\t}\n\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loader.vue?vue&type=template&id=6f5b6b41&\"\nimport script from \"./Loader.vue?vue&type=script&lang=js&\"\nexport * from \"./Loader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loader.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n<div class=\"wrapper-app\">\n\t<aside>\n\t\t<router-link to=\"/\">Dashboard</router-link>\n\t</aside>\n\t<main>\n\t\t<router-view :key=\"$route.fullPath\" />\n\n\t</main>\n\t<loader/>\n</div>\n</template>\n\n<script>\n\n\nimport Loader from './components/Loader.vue';\n\nexport default {\n\tname: 'app',\n\tcomponents: {\n\t\tLoader\n\t},\n\tdata() {\n\t\treturn {\n\t\t}\n\t},\n\tcomputed:{\n\t\tisAuthenticated:function(){\n\t\tconsole.log('this.$store.getters.isAuthenticated',this.$store.getters.isAuthenticated);\n\t\treturn this.$store.getters.isAuthenticated\n\t\t},\n\t\teditingBlockId(){\n\t\t\treturn this.$store.state.editingBlockId;\n\t\t},\n\t},\n\tmethods:{\n\n\t},\n\tmounted(){\n\n\t}\n\n}\n\n\n\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6200c6c2&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import axios from \"axios\";\n\nvar note_id;\nvar history = [];\nvar selectedBlock = null;\n\nwindow.$$ = window.$$ || function(selector, context) {\n\tcontext = context || document;\n\tvar elements = context.querySelectorAll(selector);\n\treturn Array.prototype.slice.call(elements);\n}\nwindow.$ = window.$ || function(selector, context) {\n\tcontext = context || document;\n\treturn context.querySelector(selector);\n}\n\nwindow.addHistory = function(data){\n\tif(!data) return;\n\n\tif(history.length && JSON.stringify(data) == JSON.stringify(history[history.length-1])) return; //same\n\thistory.push(data);\n\tconsole.log('history added',data);\n\n\tif(history.length>10) {\n\t\thistory.shift();\n\t}\n\n}\n\nwindow.revertHistory = function(){\n\tvar data = history.pop();\n\tconsole.log('history data',data);\n\tif(!data) return;\n\thydrate(window.note_id,data);\n}\n\n\nwindow.getData = function(){\n\n\n\tvar textarea = $('textarea');\n\tif(textarea){\n\t\tvar p = textarea.nextSibling;\n\t\tif(p && p.tagName=='P') p.innerHTML = marked(textarea.value);\n\t}\n\n\tvar data = $$('[data-block]').map(block=>{\n\t\tvar parent = block.parentNode.closest('[data-block]');\n\t\tvar parent_id = null;\n\t\tif(parent){\n\t\t\tparent_id = parent.getAttribute('data-block');\n\t\t\tif(!parent_id) parent_id = parent.getAttribute('data-temp-id');\n\t\t}\n\t\treturn {\n\t\t\tid:block.getAttribute('data-block'),\n\t\t\tparent_id:parent_id,\n\t\t\torder:getBlockOrder(block),\n\t\t\ttemp_id:block.getAttribute('data-temp-id'),\n\t\t\ttext:unmarked($('p',block).innerHTML),\n\t\t}\n\t});\n\n\treturn data;\n\n}\n\ndocument.addEventListener('click',function(e){\n\tconsole.log('click');\n\tif(e.target.matches('textarea')) {\n\t\tconsole.log('textarea clicked');\n\t\tconsole.log(e);\n\t\te.stopPropagation();\n\t} else {\n\t\tvar blockDom = e.target.closest('[data-block]');\n\t\tif(!blockDom) return;\n\n\t\tclickedBlock(blockDom,e)\n\t}\n})\n\n\nwindow.getTempId = function(){\n\tif(!window.tempId) window.tempId = new Date().getTime();\n\treturn 'temp-'+(window.tempId++);\n}\n\n\nwindow.newBlock = function(note_id){\n\tvar li = document.createElement('li');\n\tli.setAttribute('data-block','');\n\tli.setAttribute('data-temp-id',getTempId());\n\tvar p = document.createElement('p');\n\tli.appendChild(p);\n\tvar container = $(`[data-note=\"${note_id}\"] .vanilla`);\n\tvar parent =  $('ul',container);\n\tif(!parent) {\n\t\tvar parent = document.createElement('ul');\n\t\tcontainer.appendChild(parent);\n\t}\n\tparent.appendChild(li);\n\teditBlock(li);\n}\n\nwindow.clickedBlock = function(block,e){\n\n\tvar x = e.clientX - e.target.getBoundingClientRect().x;\n\tvar y = e.clientY - e.target.getBoundingClientRect().y;\n\n\tvar clickPos = window.getSelection().getRangeAt(0).endOffset;\n\teditBlock(block);\n\n\tconsole.log('clickPos',clickPos);\n\n\tvar textareaDom = $('textarea');\n\ttextareaDom.focus();\n\ttextareaDom.selectionStart = clickPos;\n\ttextareaDom.selectionEnd = clickPos;\n\n}\n\nwindow.editBlock = function(block){\n\tconsole.log('editBlock');\n\n\tselectedBlock = block;\n\n\tvar p = block.querySelector('p');\n\tvar prev = p.previousSibling;\n\tif(prev && prev.tagName=='TEXTAREA') return prev.focus();\n\n\tremoveTextareas()\n\n\tvar textareaDom = document.createElement('textarea');\n\ttextareaDom.value = unmarked(p.innerHTML);\n\tblock.insertBefore(textareaDom,p);\n\ttextareaDom.focus();\n\tsetInputHeight(textareaDom);\n\n}\n\nwindow.updateBlocksRefs = function(data){\n\n\tfor(var temp_id in data){\n\t\tvar block_id = data[temp_id]\n\t\tvar block = document.querySelector(`[data-temp-id=\"${temp_id}\"]`);\n\t\tif(!block) continue;\n\t\tblock.removeAttribute('data-temp-id');\n\t\tblock.setAttribute('data-block',block_id);\n\t}\n\n}\n\nwindow.saveAll = function(){\n\n\tconsole.log('saving');\n\n\tvar note_id = $('[data-note]').getAttribute('data-note');\n\n\tvar data = getData();\n\taddHistory(data);\n\n\taxios({\n\t\t\tmethod:'post',\n\t\t\turl:'/api/notes/save-blocks/'+note_id,\n\t\t\tdata:data,\n\t}).then(res=>{\n\t\t\tupdateBlocksRefs(res.data);\n\t}).catch(res=>{\n\t\t\tconsole.error('save error');\n\t\t\tconsole.error(res);\n\t});\n}\n\nwindow.getBlockOrder = function(block){\n\tvar blocks = $$('[data-block]');\n\treturn blocks.indexOf(block)+1;\n}\n\nwindow.getPrevBlock = function(block){\n\tif(!block) block = $('textarea').closest('[data-block]');\n\tvar blocks = $$('[data-block]');\n\tvar index = blocks.indexOf(block)\n\tif(index==0) return;\n\treturn blocks[index-1];\n}\n\nwindow.selectPrev = function(){\n\tvar block = getPrevBlock(block);\n\tif(!block) return;\n\tvar pos = getCarretPosition();\n\teditBlock(block);\n\tvar textareaDom = $('textarea');\n\tvar selectionStart = getSelectionEnd(textareaDom,pos.x);\n\ttextareaDom.selectionStart = selectionStart;\n\ttextareaDom.selectionEnd = selectionStart;\n}\n\nwindow.getNextBlock = function(block){\n\tif(!block) block = $('textarea').closest('[data-block]');\n\tvar blocks = $$('[data-block]');\n\tvar index = blocks.indexOf(block)\n\tif(index==blocks.length-1) return;\n\treturn blocks[index+1];\n}\n\nwindow.selectNext = function(block){\n\tvar block = getNextBlock(block);\n\tif(!block) return;\n\tvar pos = getCarretPosition();\n\teditBlock(block);\n\tvar textareaDom = $('textarea');\n\tvar selectionStart = getSelectionStart(textareaDom,pos.x);\n\ttextareaDom.selectionStart = selectionStart;\n\ttextareaDom.selectionEnd = selectionStart;\n}\n\nwindow.hydrate = function(note_id,data){\n\twindow.note_id = note_id;\n\t$(`[data-note=\"${note_id}\"] .vanilla`).innerHTML = build_html(data);\n}\n\nwindow.build_html = function(data,parent_id,level) {\n\tparent_id = parent_id || null;\n\tlevel = level || 0;\n\tvar output_html = ''\n\tdata.forEach(block=>{\n\t\tif(block.parent_id==parent_id){\n\t\t\toutput_html += `<li data-block=\"${block.id}\">`;\n\t\t\toutput_html += `<p>${marked(block.text)}</p>`;\n\t\t\toutput_html += build_html(data,block.id,level+1);\n\t\t\toutput_html += `</li>`;\n\t\t}\n\t})\n\tif(!output_html) return '';\n\treturn `<ul>${output_html}</ul>`;\n}\n\nwindow.saferEval = function(expression, dataContext) {\n\ttry{\n\t\treturn (new Function(['$data'], `var result; with($data) { result = ${expression} }; return result`))(dataContext)\n\t} catch(e){\n\t\tconsole.log('Safer eval error: '+e)\n\t\treturn;\n\t}\n}\n\nwindow.toastr = function(body,title,color,seconds){\n\n\ttitle = title || '';\n\tcolor = color || '#007aff'\n\tseconds = seconds || (2 + body.length/50);\n\n\tvar div = document.createElement('div');\n\tdiv.className = 'toast show';\n\tdiv.setAttribute('style','min-width:200px; position: fixed; bottom: 10px; right: 10px;');\n\tdiv.innerHTML = `\n\t<div class=\"toast-header\">\n\t<svg class=\"bd-placeholder-img rounded mr-2\" width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\" preserveAspectRatio=\"xMidYMid slice\" focusable=\"false\" role=\"img\"><rect width=\"100%\" height=\"100%\" fill=\"${color}\"></rect></svg>\n\t<strong>${title}</strong>\n\t</div>\n\t<div class=\"toast-body\">\n\t${body}\n\t</div>`;\n\tdocument.body.appendChild(div);\n\n\tsetTimeout(()=>{\n\t\tdocument.body.removeChild(div);\n\t},seconds*1000);\n\n}\n\nwindow.marked = function(text){\n\tif(!text) return '';\n\ttext = text.replace('[[TODO]]','<span class=\"checkbox\"></span>')\n\ttext = text.replace('[[DONE]]','<span class=\"checkbox checked\"></span>')\n\treturn text;\n}\n\nwindow.unmarked = function(text){\n\tif(!text) return '';\n\ttext = text.replace('<span class=\"checkbox\"></span>','[[TODO]]')\n\ttext = text.replace('<span class=\"checkbox checked\"></span>','[[DONE]]')\n\treturn text;\n}\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios';\nimport router from '@/router';\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    user: {\n        id:null,\n        email:'',\n        is_admin:false,\n    },\n    authInitialized:false,\n    intendedUrl:'',\n    notes:[],\n    note:{},\n    blocks:[],\n    oldText:'',\n    editingBlockId:null,\n    loading: 0,\n    loadingMessage: '',\n  },\n  mutations: {\n    startLoading(state) {\n      state.loading += 1;\n    },\n    stopLoading(state) {\n      if(state.loading>0) state.loading -= 1;\n    },\n    setLoadingMessage(state, payload) {\n      state.loadingMessage = payload;\n    },\n    setIntendedUrl (state,payload) {\n      state.intendedUrl = payload;\n    },\n    authInitialized (state) {\n      state.authInitialized = true;\n    },\n    setUser (state,payload) {\n        state.user = payload;\n    },\n    setEditingBlockId (state,payload) {\n        state.editingBlockId = payload;\n    },\n    setOldText (state,payload) {\n        state.oldText = payload;\n    }\n  },\n  actions: {\n    startLoading({commit}){\n      commit('startLoading')\n    },\n    stopLoading({commit}){\n      commit('stopLoading')\n      if(this.state.loading==0 && this.state.loadingMessage) {\n        commit('setLoadingMessage','');\n      }\n    },\n    setLoadingMessage({commit},{message}){\n      commit('setLoadingMessage',message)\n    },\n    setUser ({commit},user) {\n      commit('setUser',user)\n    },\n    setIntendedUrl ({commit},url) {\n      commit('setIntendedUrl',url)\n    },\n    authInitialized ({commit},bool) {\n      commit('authInitialized',bool)\n    },\n    getNote({state},slug){\n\n        this.dispatch('startLoading');\n        return axios({\n            url: '/api/notes/'+slug,\n        }).then(res=>{\n            state.note = res.data;\n            state.blocks = res.data.blocks;\n            return res;\n\n        }).catch(res=>{\n            toastr('No permisson to view this project','Error','#cc0000');\n            this.$router.replace('/');\n        }).finally(()=>{\n            this.dispatch('stopLoading');\n        })\n\n\n    },\n    editBlock({commit,state},block_id){\n        if(state.editingBlockId!==null){\n            this.dispatch('saveBlock')\n        }\n\n        commit('setEditingBlockId',block_id);\n        if(block_id===null) return;\n        var block = this.getters.block;\n        commit('setOldText',block.text);\n        setTimeout(()=>{\n            document.querySelector('textarea').focus()\n        },1);\n\n    },\n    postCreate({state},{data,fn}){\n        axios({\n            method:'post',\n            url:'/api/blocks',\n            data:data,\n        }).then(res=>{\n            if(fn) fn(res);\n        }).catch(res=>{\n            console.error('save error');\n            console.error(res);\n        });\n    },\n    postUpdate({state},{id,data,fn}){\n        console.log('postupdate',id,data,fn);\n        axios({\n            method:'post',\n            url:'/api/blocks/'+id,\n            data:data,\n        }).then(res=>{\n            if(fn) fn(res);\n        }).catch(res=>{\n            console.error('save error');\n            console.error(res);\n        });\n    },\n    postBatch({state},{data,fn}){\n        console.log('postbatch')\n        axios({\n            method:'post',\n            url:'/api/blocks/batch',\n            data:data,\n        }).then(res=>{\n            if(fn) fn(res);\n        }).catch(res=>{\n            console.error('save error');\n            console.error(res);\n        });\n    },\n    saveBlock({state}){\n        console.log('saveBlock')\n        var block = this.getters.block;\n        if(!block) return;\n        var value = document.querySelector('textarea').value;\n        if(block.id && state.oldText==value) {\n            console.log('same text, skip saving');\n            return;\n        }\n        var data = {\n          text:value,\n          order:block.order,\n          parent_id:block.parent_id,\n          note_id:block.note_id\n        }\n        if(block.id){\n            this.dispatch('postUpdate',{id:block.id,data:data,fn:(res)=>{\n                block.id = res.data.id;\n            }});\n        } else {\n            this.dispatch('postCreate',{data:data,fn:(res)=>{\n                block.id = res.data.id;\n            }});\n        }\n        block.id = 'saving';\n    },\n    saveAndNew({state}){\n        console.log('saveAndNew');\n        var block = this.getters.block;\n        this.dispatch('saveBlock');\n        this.dispatch('newBlock',{\n            order:block.order,\n            parent_id:block.parent_id,\n        });\n    },\n\n    newBlock({state},{order,parent_id}){\n        console.log('new');\n        state.blocks.push({\n            text:'',\n            note_id:state.note.id,\n            id:'',\n            order:order||1,\n            parent_id:parent_id || null,\n        });\n        this.dispatch('editBlock','');\n    },\n\n    moveUp({state}){\n        var block = this.getters.block;\n        if(!block) return;\n        var siblings = this.getters.children(block.parent_id);\n        var index = siblings.indexOf(block);\n        var prev = siblings[index-1];\n        if(!prev) return;\n        var originalOrder = block.order;\n        block.order = prev.order;\n        prev.order = originalOrder;\n        var data = [{id:prev.id,order:prev.order}]\n        if(block.id) data.push({id:block.id,order:block.order})\n        this.dispatch('postBatch',{data});\n        setTimeout(()=>{\n            document.querySelector('textarea').focus()\n        },1);\n    },\n    editPrev({state}){\n        var block = this.getters.block;\n        if(!block) return;\n        var siblings = this.getters.children(block.parent_id);\n        var index = siblings.indexOf(block);\n        var prev = siblings[index-1];\n        if(!prev) return;\n        this.dispatch('editBlock',prev.id);\n\n    },\n    moveDown({state}){\n        var block = this.getters.block;\n        if(!block) return;\n        var siblings = this.getters.children(block.parent_id);\n        var index = siblings.indexOf(block);\n        var next = siblings[index+1];\n        if(!next) return;\n        var originalOrder = block.order;\n        block.order = next.order;\n        next.order = originalOrder;\n        var data = [{id:next.id,order:next.order}]\n        if(block.id) data.push({id:block.id,order:block.order})\n        this.dispatch('postBatch',{data});\n        setTimeout(()=>{\n            document.querySelector('textarea').focus()\n        },1);\n    },\n    editNext({state}){\n        var block = this.getters.block;\n        if(!block) return;\n        var siblings = this.getters.children(block.parent_id);\n        var index = siblings.indexOf(block);\n        var next = siblings[index+1];\n        if(!next) return;\n        this.dispatch('editBlock',next.id);\n    },\n    indent({state}){\n        var block = this.getters.block;\n        if(!block) return;\n        var siblings = this.getters.children(block.parent_id);\n        var index = siblings.indexOf(block);\n        var prev = siblings[index-1];\n        if(!prev) return;\n        var parent_id = prev.id;\n        var newSiblings = this.getters.children(parent_id);\n        var order = 1;\n        if(newSiblings.length){\n            order = newSiblings[newSiblings.length-1].order+1\n        }\n        block.parent_id = parent_id;\n        block.order = order;\n        setTimeout(()=>{\n            document.querySelector('textarea').focus()\n        },1);\n        if(!block.id) return; //new block\n        this.dispatch('postUpdate',{\n            id:block.id,\n            data:{\n                parent_id:block.parent_id,\n                order:block.order,\n            }\n        });\n    },\n    unindent({state}){\n        var block = this.getters.block;\n        if(!block) return;\n        if(block.parent_id==null) return;\n        var parent_id = block.parent_id;\n        var parent = state.blocks.find(i=>i.id==parent_id);\n\n        block.parent_id = parent.parent_id;\n        block.order = parent.order+1;\n        setTimeout(()=>{\n            document.querySelector('textarea').focus()\n        },1);\n        if(!block.id) return; //new block\n        this.dispatch('postUpdate',{\n            id:block.id,\n            data:{\n                parent_id:block.parent_id,\n                order:block.order,\n            }\n        });\n    },\n    cancelEditing({state}){\n        this.dispatch('editBlock',null);\n    },\n    deleteBlock({state}){\n        console.log('delete block')\n\n        var block = this.getters.block;\n        if(block.id){\n\n            axios({\n                method:'delete',\n                url:'/api/blocks/'+block.id\n            }).then(res=>{\n\n            }).catch(res=>{\n                console.error('save error');\n                console.error(res);\n            });\n        }\n        this.dispatch('removeBlock',block);\n    },\n    removeBlock({state},block){\n        console.log('removeBlock')\n\n        var siblings = this.getters.children(block.parent_id);\n        var prev = siblings[siblings.indexOf(block)-1];\n        var prev_id = prev?prev.id:null;\n\n        state.blocks.splice(state.blocks.indexOf(block),1);\n\n        this.dispatch('editBlock',prev_id);\n    }\n\n\n  },\n\n  getters: {\n    isAuthenticated:(state) => state.authInitialized && state.user &&  state.user.id,\n    editingBlock_id:(state) => state.editingBlockId,\n    children:(state,getters)=> (parent_id)=>{\n        return getters.sort(state.blocks.filter(b=>b.parent_id==parent_id));\n    },\n    sort:() => (blocks)=>{\n        return blocks.sort((a,b)=>{\n            //if(a.parent_id!=b.parent_id){\n            //    return 1;\n            //}\n            if(a.order!=b.order){\n                return a.order>b.order?1:-1\n            }\n            if(!a.id) return 1;\n            return a.id>b.id?1:-1\n        });\n    },\n    blocks:(state,getters) => {\n        return getters.sort(state.blocks);\n    },\n    block:(state) => {\n        if(state.editingBlockId===null) return null;\n        return state.blocks.find(i=>i.id==state.editingBlockId);\n    }\n  }\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dashboard\"},[_c('div',{staticClass:\"container\"},[_vm._m(0),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.newNote($event)}}},[_vm._v(\" new note\"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.name),expression:\"note.name\"}],attrs:{\"required\":\"\"},domProps:{\"value\":(_vm.note.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"notes\"},_vm._l((_vm.notes),function(note){return _c('div',{key:note.id,staticClass:\"item\"},[_c('router-link',{attrs:{\"to\":'/'+note.slug}},[_vm._v(_vm._s(note.slug))])],1)}),0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex align-items-center justify-content-between my-3\"},[_c('h1',[_vm._v(\"Notes\")])])}]\n\nexport { render, staticRenderFns }","<template>\n\n  <div class=\"dashboard\">\n\n    <!-- <app-header /> -->\n\n    <div class=\"container\">\n      <div class=\"d-flex align-items-center justify-content-between my-3\">\n        <h1>Notes</h1>\n      </div>\n      <form @submit.prevent=\"newNote\">\n          new note<input v-model=\"note.name\" required>\n        </form>\n      <div class=\"notes\">\n        <div class=\"item\" v-for=\"note in notes\" :key=\"note.id\">\n            <router-link :to=\"'/'+note.slug\">{{note.slug}}</router-link>\n        </div>\n      </div>\n\n    </div>\n\n  </div>\n\n</template>\n\n\n\n\n<script>\nimport axios from 'axios';\n\n\n// import appHeader from '../components/appHeader.vue'\n\nexport default {\n  name: 'dashboard',\n  components:{\n    // appHeader,\n  },\n  data() {\n    return {\n      notes:[],\n      note:{\n          name:''\n      }\n    }\n  },\n  methods:{\n\n    getNotes(){\n      this.$store.dispatch('startLoading');\n      axios({\n        url: '/api/notes',\n      }).then((res) => {\n        this.notes = res.data;\n      }).finally(()=>{\n        this.$store.dispatch('stopLoading');\n      });\n    },\n\n    newNote(){\n        if(!this.note.name) return false;\n        this.$store.dispatch('startLoading');\n        var data = this.note;\n      axios({\n          method:'post',\n        url: '/api/notes',\n        data:data,\n      }).then((res) => {\n          this.$router.push({path:res.data.slug});\n      }).finally(()=>{\n        this.$store.dispatch('stopLoading');\n      });\n\n    }\n\n\n\n  },\n  created(){\n    this.getNotes();\n\n  }\n\n}\n\n\n\n</script>\n<style scoped>\n    .notes {  }\n    .item { padding:10px ;  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.vue?vue&type=template&id=ad038b90&scoped=true&\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Dashboard.vue?vue&type=style&index=0&id=ad038b90&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ad038b90\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container\",attrs:{\"data-note\":_vm.note.id}},[_c('div',{staticClass:\"my-3\"},[_c('h1',[_vm._v(_vm._s(_vm.note.name))])]),_vm._m(0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"blocks\"},[_c('div',{staticClass:\"vanilla\"},[_c('ul')])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{attrs:{\"data-level\":_vm.level}},_vm._l((_vm.levelBlocks),function(block){return _c('li',{key:block.id},[_c('div',{staticClass:\"block-content\"},[(_vm.editingBlockId !== null && _vm.editingBlockId == block.id)?_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(block.text),expression:\"block.text\"}],key:block.id,domProps:{\"value\":(block.text)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(block, \"text\", $event.target.value)},_vm.setLayerHeight],\"focus\":_vm.setLayerHeight,\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleEnter($event, block)}}}):_vm._e(),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.marked(block.text))},on:{\"click\":function($event){return _vm.editBlock(block.id)}}})]),_c('block-list',{attrs:{\"blocks\":_vm.blocks,\"level\":_vm.level + 1,\"parent_id\":block.id,\"note_id\":_vm.note_id}})],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<ul :data-level=\"level\">\n\t\t<li v-for=\"block in levelBlocks\" :key=\"block.id\">\n\t\t\t<div class=\"block-content\">\n\t\t\t\t<textarea\n\t\t\t\t\t:key=\"block.id\"\n\t\t\t\t\tv-if=\"editingBlockId !== null && editingBlockId == block.id\"\n\t\t\t\t\tv-model=\"block.text\"\n\t\t\t\t\t@input=\"setLayerHeight\"\n\t\t\t\t\t@focus=\"setLayerHeight\"\n\t\t\t\t\t@keydown.enter=\"handleEnter($event, block)\"\n\t\t\t\t></textarea>\n\t\t\t\t<p @click=\"editBlock(block.id)\" v-html=\"marked(block.text)\"></p>\n\t\t\t</div>\n\t\t\t<block-list\n\t\t\t\t:blocks=\"blocks\"\n\t\t\t\t:level=\"level + 1\"\n\t\t\t\t:parent_id=\"block.id\"\n\t\t\t\t:note_id=\"note_id\"\n\t\t\t/>\n\t\t</li>\n\t</ul>\n</template>\n<script>\nimport axios from \"axios\";\n\nexport default {\n\tname: \"BlockList\",\n\tcomponents: {},\n\tprops: [\"blocks\", \"level\", \"parent_id\", \"note_id\"],\n\tdata() {\n\t\treturn {};\n\t},\n\tcomputed: {\n\t\teditingBlockId() {\n\t\t\treturn this.$store.state.editingBlockId;\n\t\t},\n\t\tlevelBlocks() {\n\t\t\treturn this.blocks.filter(block => block.parent_id == this.parent_id);\n\t\t}\n\t},\n\tmethods: {\n\t\thandleEnter(e) {\n\t\t\tconsole.log(\"enter\");\n\t\t\tif (e.ctrlKey) {\n\t\t\t\tvar block = this.$store.getters.block;\n\t\t\t\tif (!block.text.match(/^\\[\\[(TODO|DONE)\\]\\]/)) {\n\t\t\t\t\tblock.text = \"[[TODO]] \" + block.text;\n\t\t\t\t} else if (block.text.match(/^\\[\\[TODO\\]\\]/)) {\n\t\t\t\t\tblock.text = block.text.replace(/^\\[\\[TODO\\]\\]/, \"[[DONE]]\");\n\t\t\t\t} else if (block.text.match(/^\\[\\[DONE\\]\\]/)) {\n\t\t\t\t\tblock.text = block.text.replace(/^\\[\\[DONE\\]\\] */, \"\");\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!e.shiftKey) {\n\t\t\t\tthis.$store.dispatch(\"saveAndNew\");\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\teditBlock(block_id) {\n\t\t\tconsole.log(\"starteditblock\");\n\t\t\tthis.$store.dispatch(\"editBlock\", block_id);\n\t\t\t//this.$nextTick(function(){\n\t\t\t//    document.querySelector('textarea').focus()\n\t\t\t//})\n\t\t},\n\t},\n\tmounted() {}\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BlockList.vue?vue&type=template&id=14b0fc65&\"\nimport script from \"./BlockList.vue?vue&type=script&lang=js&\"\nexport * from \"./BlockList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div>\n\t\t<div class=\"container\" :data-note=\"note.id\">\n\t\t\t<div class=\"my-3\">\n\t\t\t\t<h1>{{ note.name }}</h1>\n\t\t\t</div>\n\t\t\t<div class=\"blocks\">\n\t\t\t\t<div class=\"vanilla\"><ul></ul></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport axios from \"axios\";\nimport BlockList from \"@/components/BlockList\";\n\nexport default {\n\tname: \"note\",\n\tcomponents: {\n\t\tBlockList\n\t},\n\n\tprops: [\"slug\"],\n\tdata() {\n\t\treturn {\n\t\t\tnote_id:null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tnote() {\n\t\t\treturn this.$store.state.note;\n\t\t},\n\t},\n\tmethods: {\n\t\taddHistory(){ window.addHistory() },\n\t\trevertHistory(){ window.revertHistory() },\n\t},\n\tcreated() {\n\t\tthis.$store.dispatch(\"getNote\", this.slug).then(res => {\n\t\t\tthis.note_id = res.data.id;\n\t\t\thydrate(res.data.id, res.data.blocks);\n\t\t\tif(res.data.blocks.length==0){\n\t\t\t\twindow.newBlock(res.data.id);\n\t\t\t}\n\t\t});\n\t},\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Note.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Note.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Note.vue?vue&type=template&id=c4e1d640&scoped=true&\"\nimport script from \"./Note.vue?vue&type=script&lang=js&\"\nexport * from \"./Note.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c4e1d640\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"my-3\"},[_c('h1',[_vm._v(_vm._s(_vm.project.name))]),_c('p',{staticClass:\"text-muted\"},[_c('a',{attrs:{\"href\":_vm.url(_vm.project.slug),\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.url(_vm.project.slug)))])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('dl',[_c('dt',[_vm._v(\"Domain\")]),_c('dd',[_c('span',[_vm._v(_vm._s(_vm.project.domain || '(not set)'))]),_c('button',{staticClass:\"btn ml-1  btn-sm btn-light\",on:{\"click\":_vm.openModalDomain}},[_vm._v(\"Configure\")])])])]),(_vm.project.domain)?_c('div',{staticClass:\"col\"},[_c('dl',[_c('dt',[_vm._v(\"State\")]),_c('dd',[(_vm.project.is_published)?_c('span',[_c('a',{on:{\"click\":function($event){$event.preventDefault();return _vm.openModalUnpublish($event)}}},[_c('i',{staticClass:\"state-published\"}),_vm._v(\" Published \")])]):_vm._e(),(!_vm.project.is_published)?_c('span',[_c('a',{on:{\"click\":function($event){$event.preventDefault();return _vm.openModalPublish($event)}}},[_c('i',{staticClass:\"state-unpublished\"}),_vm._v(\" Unpublished \")])]):_vm._e()])])]):_vm._e()]),_c('router-link',{staticClass:\"btn btn-light btn-sm\",attrs:{\"to\":'/project/'+_vm.project.id+'/edit'}},[_vm._v(\"Edit project\")]),_c('router-link',{staticClass:\"btn btn-light btn-sm\",attrs:{\"to\":{name:'project-tables',params:{project_id:_vm.project.id}}}},[_vm._v(\"Admin\")]),(_vm.project.domain)?_c('router-link',{staticClass:\"btn btn-light btn-sm\",attrs:{\"to\":{name:'form-history',params:{project_id:_vm.project.id}}}},[_vm._v(\"Form history\")]):_vm._e(),(_vm.project.tables && _vm.project.tables.length>0)?_c('p',{staticClass:\"text-muted\"},[_c('a',{attrs:{\"href\":_vm.urladmin(),\"target\":\"_blank\"}},[_vm._v(\"Painel Admin\")])]):_vm._e()],1),_c('h3',[_vm._v(\"Pages\")]),_c('table',{staticClass:\"table\"},[_c('tbody',_vm._l((_vm.project.pages),function(page){return _c('tr',[_c('td',[_vm._v(_vm._s(page.name))]),_c('td',{staticClass:\"text-nowrap\"},[_vm._v(\" \"+_vm._s(page.slug)+\" \"),_c('a',{staticClass:\"ml-2\",attrs:{\"href\":_vm.url(_vm.project.slug,page.slug),\"target\":\"_blank\"}},[_c('svg',{staticClass:\"icosvg\",attrs:{\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z\"}})])])]),_c('td',{staticClass:\"text-right text-nowrap\"},[_c('router-link',{staticClass:\"btn btn-sm btn-primary mr-2\",attrs:{\"to\":'/project/'+_vm.project.id+'/'+page.id}},[_c('span',{staticClass:\"is-desktop\"},[(!page.output)?_c('span',[_vm._v(\"start building page\")]):_c('span',[_vm._v(\"edit page\")])]),_c('svg',{staticClass:\"is-mobile icosvg\",attrs:{\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z\"}})])]),_c('button',{staticClass:\"btn btn-sm btn-link has-text-danger\",on:{\"click\":function($event){return _vm.removePage(page)}}},[_c('svg',{staticClass:\"icosvg\",attrs:{\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\"}})])])],1)])}),0)]),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.newPage}},[_vm._v(\"New page\")]),(_vm.isAdmin)?_c('button',{staticClass:\"btn btn-warning\",on:{\"click\":_vm.openModalSaveTemplate}},[_vm._v(\"save as template\")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n<div>\n\n\n\n  <div class=\"container\">\n\n      <div class=\"my-3\">\n        <h1>{{project.name}}</h1>\n        <p class=\"text-muted\"><a :href=\"url(project.slug)\" target=\"_blank\">{{url(project.slug)}}</a></p>\n\n\n        <div class=\"row\">\n          <div class=\"col\">\n            <dl>\n              <dt>Domain</dt>\n              <dd>\n                <span>{{ project.domain || '(not set)'}}</span>\n                <button class=\"btn ml-1  btn-sm btn-light\" @click=\"openModalDomain\">Configure</button>\n              </dd>\n            </dl>\n          </div>\n          <div class=\"col\" v-if=\"project.domain\">\n            <dl>\n              <dt>State</dt>\n              <dd>\n                <span v-if=\"project.is_published\">\n                  <a @click.prevent=\"openModalUnpublish\">\n                    <i class=\"state-published\"></i>\n                    Published\n                  </a>\n                </span>\n                <span v-if=\"!project.is_published\">\n                  <a @click.prevent=\"openModalPublish\">\n                    <i class=\"state-unpublished\"></i>\n                    Unpublished\n                  </a>\n                </span>\n              </dd>\n            </dl>\n          </div>\n        </div>\n\n        <router-link class=\"btn btn-light btn-sm\" :to=\"'/project/'+project.id+'/edit'\">Edit project</router-link>\n        <router-link class=\"btn btn-light btn-sm\" :to=\"{name:'project-tables',params:{project_id:project.id}}\">Admin</router-link>\n        <router-link v-if=\"project.domain\" class=\"btn btn-light btn-sm\" :to=\"{name:'form-history',params:{project_id:project.id}}\">Form history</router-link>\n\n        <p v-if=\"project.tables && project.tables.length>0\" class=\"text-muted\"><a :href=\"urladmin()\" target=\"_blank\">Painel Admin</a></p>\n\n      </div>\n\n      <h3>Pages</h3>\n      <table class=\"table\">\n        <tbody>\n          <tr v-for=\"page in project.pages\">\n            <td>{{ page.name }}</td>\n            <td class=\"text-nowrap\">\n              {{ page.slug }}\n              <a class=\"ml-2\" :href=\"url(project.slug,page.slug)\" target=\"_blank\">\n                <svg class=\"icosvg\" viewBox=\"0 0 24 24\">\n                  <path fill=\"currentColor\" d=\"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z\" />\n                </svg>\n              </a>\n            </td>\n            <td class=\"text-right text-nowrap\">\n              <router-link class=\"btn btn-sm btn-primary mr-2\" :to=\"'/project/'+project.id+'/'+page.id\">\n                <span class=\"is-desktop\"><span v-if=\"!page.output\">start building page</span><span v-else>edit page</span></span>\n                <svg class=\"is-mobile icosvg\" viewBox=\"0 0 24 24\">\n                    <path fill=\"currentColor\" d=\"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z\" />\n                </svg>\n              </router-link>\n              <button class=\"btn btn-sm btn-link has-text-danger\" @click=\"removePage(page)\"><svg class=\"icosvg\" viewBox=\"0 0 24 24\">\n                <path fill=\"currentColor\" d=\"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\" />\n              </svg></button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <button class=\"btn btn-primary\" @click=\"newPage\">New page</button>\n\n\n\n      <button v-if=\"isAdmin\" class=\"btn btn-warning\" @click=\"openModalSaveTemplate\">save as template</button>\n\n   </div>\n\n\n\n\n\n</div>\n\n</template>\n<script>\n\nimport axios from 'axios';\n\n\nexport default {\n  name: 'project',\n  components:{\n\n  },\n  // prop:['id'],\n  props:['id'],\n  data() {\n    return {\n        modalDomain:false,\n        modalTemplate:false,\n        modalPublish:false,\n        modalUnpublish:false,\n\n    }\n  },\n  computed:{\n    project(){\n      return this.$store.getters.project;\n    },\n    isAdmin(){\n      return this.$store.getters.user.is_admin;\n    },\n  },\n  methods:{\n    openModalSaveTemplate(){\n      this.modalTemplate = true;\n    },\n    openModalDomain(){\n      this.modalDomain = true;\n    },\n    openModalUnpublish(){\n      this.modalUnpublish = true;\n      },\n    openModalPublish(){\n      this.modalPublish = true;\n    },\n    url(slug,page){\n      var url = process.env.VUE_APP_PROTOCOL+'://'+slug+'.'+process.env.VUE_APP_BASEURL;\n      if(page) url += '/'+page.replace(/\\/$/,'')\n      return url;\n    },\n    urladmin(){\n      var domain = this.project.domain;\n      if(domain){\n        var url = 'https://'+domain;\n      } else {\n        var url = process.env.VUE_APP_PROTOCOL+'://'+this.project.slug+'.'+process.env.VUE_APP_BASEURL;\n      }\n\n      url += '/admin?token='+this.project.token;\n      return url;\n    },\n    dataBr(data){\n      var d = new Date(data);\n      return ('0'+d.getDate()).substr(-2) + '/' +('0'+(d.getMonth()+1)).substr(-2)+'/'+d.getFullYear();\n    },\n\n    getProject(){\n      this.$store.dispatch('startLoading');\n      this.$store.dispatch('getProject',this.id).catch(res=>{\n        toastr('No permisson to view this project','Error','#cc0000');\n        this.$router.replace('/');\n      }).finally(()=>{\n        this.$store.dispatch('stopLoading');\n      })\n    },\n\n    newPage(){\n      let name = prompt('Page name');\n      if(!name) return;\n\n      axios({\n        method: 'post',\n        url: '/api/pages',\n        data: {\n          name:name,\n          project_id:this.id,\n        }\n      }).then((res) => {\n        this.$router.push('/project/'+this.id+'/'+res.data.id);\n//      let project = res.data;\n//      this.editProject(project.id);\n      });\n\n    },\n    removePage(page){\n      if(!confirm('Remove page?')) return;\n      axios({\n        method: 'delete',\n        url: '/api/page/'+page.id,\n      }).then((res) => {\n        this.getProject();\n        //router push /project/'+project.id+'/'+page.id\n//        let project = res.data;\n//        this.editProject(project.id);\n      });\n\n    },\n\n  },\n  mounted(){\n  \tconsole.log('id',this.id);\n    this.getProject();\n  }\n\n}\n\n\n\n</script>\n\n<style scoped>\n\n\n\n\n\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Block.vue?vue&type=template&id=fc4871f8&scoped=true&\"\nimport script from \"./Block.vue?vue&type=script&lang=js&\"\nexport * from \"./Block.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fc4871f8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('h1',{staticClass:\"mt-5 mb-3 text-center\"},[_vm._v(\"Bold Journaling\")]),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-lg-6\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_vm._v(\"Login\")]),_c('div',{staticClass:\"card-body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmitLogin($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.email),expression:\"login.email\"}],staticClass:\"form-control\",attrs:{\"type\":\"email\",\"placeholder\":\"E-mail\",\"required\":\"\"},domProps:{\"value\":(_vm.login.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.login, \"email\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.password),expression:\"login.password\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"placeholder\":\"Password\",\"required\":\"\"},domProps:{\"value\":(_vm.login.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.login, \"password\", $event.target.value)}}}),_c('small',{staticClass:\"form-text text-muted text-right\"},[_c('router-link',{attrs:{\"to\":\"forgot\"}},[_vm._v(\"forgot password\")])],1)]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Login\")])])])])]),_c('div',{staticClass:\"col-lg-6\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_vm._v(\"Register\")]),_c('div',{staticClass:\"card-body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmitRegister($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.register.name),expression:\"register.name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Name\",\"required\":\"\"},domProps:{\"value\":(_vm.register.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.register, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.register.email),expression:\"register.email\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"E-mail\",\"required\":\"\"},domProps:{\"value\":(_vm.register.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.register, \"email\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.register.password),expression:\"register.password\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"placeholder\":\"Password\",\"required\":\"\"},domProps:{\"value\":(_vm.register.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.register, \"password\", $event.target.value)}}})]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Register\")])])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n  <div class=\"container\">\n\n    <h1 class=\"mt-5 mb-3 text-center\">Bold Journaling</h1>\n\n    <div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\n\n\n\n    <div class=\"row\">\n      <div class=\"col-lg-6\">\n\n        <div class=\"card\">\n          <div class=\"card-header\">Login</div>\n          <div class=\"card-body\">\n            <form @submit.prevent=\"onSubmitLogin\">\n              <div class=\"form-group\">\n                <input type=\"email\" placeholder=\"E-mail\" class=\"form-control\" v-model=\"login.email\" required>\n              </div>\n              <div class=\"form-group\">\n                <input type=\"password\" placeholder=\"Password\" class=\"form-control\" v-model=\"login.password\" required>\n                <small class=\"form-text text-muted text-right\"><router-link to=\"forgot\">forgot password</router-link></small>\n              </div>\n              <button class=\"btn btn-primary\" type=\"submit\">Login</button>\n            </form>\n          </div>\n\n\n        </div>\n\n\n      </div>\n      <div class=\"col-lg-6\">\n        <div class=\"card\">\n          <div class=\"card-header\">Register</div>\n          <div class=\"card-body\">\n            <form @submit.prevent=\"onSubmitRegister\">\n              <div class=\"form-group\">\n                <input type=\"text\" placeholder=\"Name\" v-model=\"register.name\" class=\"form-control\" required>\n              </div>\n              <div class=\"form-group\">\n                <input type=\"text\" placeholder=\"E-mail\" v-model=\"register.email\" class=\"form-control\" required>\n              </div>\n              <div class=\"form-group\">\n                <input type=\"password\" placeholder=\"Password\" v-model=\"register.password\" class=\"form-control\" required>\n              </div>\n              <button class=\"btn btn-primary\" type=\"submit\">Register</button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n\n</template>\n<style scoped>\n\n\n\n</style>\n\n<script>\n\n  import axios from 'axios';\n\n  export default {\n  // props:['id','page_id'],\n  data() {\n    return {\n      error:'',\n      login:{\n        email:'',\n        password:'',\n      },\n      register:{\n        name:'',\n        email:'',\n        password:'',\n      }\n    }\n  },\n\n  methods:{\n\n    onSubmitLogin(){\n      this.error = '';\n      axios({\n        method: 'post',\n        url: '/api/login',\n        data: this.login\n      }).then((res)=>{\n        this.$store.dispatch('setUser',res.data)\n        let intendedUrl = this.$store.state.intendedUrl;\n        if(intendedUrl=='/login' || !intendedUrl) intendedUrl = '/';\n        this.$router.push({path:intendedUrl})\n\n      }).catch((error)=>{\n        this.error = error.response.data;\n      });\n\n    },\n\n    onSubmitRegister(){\n      this.error = '';\n      axios({\n        method: 'post',\n        url: '/api/register',\n        data: this.register\n      }).then((res)=>{\n        this.$store.dispatch('setUser',res.data)\n\n        let intendedUrl = this.$store.state.intendedUrl;\n        if(intendedUrl=='/login' || !intendedUrl) intendedUrl = '/';\n        this.$router.push({path:intendedUrl})\n\n      }).catch((error)=>{\n        this.error = error.response.data;\n      });\n\n    },\n\n  },\n  mounted(){\n  }\n\n}\n\n\n\n</script>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=1284db2f&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1284db2f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('h1',{staticClass:\"mt-5 mb-3 text-center\"},[_vm._v(\"Bold Journaling\")]),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('div',{staticClass:\"w-50 mx-auto\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_vm._v(\"Password recovery\")]),_c('div',{staticClass:\"card-body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"E-mail\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.email),expression:\"login.email\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"required\":\"\"},domProps:{\"value\":(_vm.login.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.login, \"email\", $event.target.value)}}})]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Recover\")])])])]),_c('p',{staticClass:\"text-center mt-3\"},[_c('router-link',{attrs:{\"to\":\"login\"}},[_vm._v(\"Back to login\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n  <div class=\"container\">\n\n<h1 class=\"mt-5 mb-3 text-center\">Bold Journaling</h1>\n\n<div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\n\n<div class=\"w-50 mx-auto\">\n<div class=\"card\">\n  <div class=\"card-header\">Password recovery</div>\n  <div class=\"card-body\">\n\n        <form @submit.prevent=\"onSubmit\">\n            <div class=\"form-group\">\n              <label>E-mail</label>\n              <input type=\"text\" class=\"form-control\" v-model=\"login.email\" required>\n            </div>\n          <button type=\"submit\" class=\"btn btn-primary\">Recover</button>\n        </form>\n\n\n  </div>\n  </div>\n  <p class=\"text-center mt-3\">\n        <router-link to=\"login\">Back to login</router-link>\n        </p>\n\n  </div>\n  </div>\n\n\n</template>\n<style scoped>\n\n\n</style>\n\n<script>\n\nimport axios from 'axios';\n\nexport default {\n  // props:['id','page_id'],\n  data() {\n    return {\n      error:'',\n      login:{\n        email:'',\n      },\n    }\n  },\n\n  methods:{\n\n    onSubmit(){\n      this.error = '';\n      axios({\n        method: 'post',\n        url: '/api/forgot',\n        data: this.login\n      }).then((res)=>{\n          alert('mensagem enviada');\n      }).catch((error)=>{\n          this.error = error.response.data;\n      });\n\n    },\n  },\n  mounted(){\n  }\n\n}\n\n\n\n</script>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Forgot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Forgot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Forgot.vue?vue&type=template&id=69c99584&scoped=true&\"\nimport script from \"./Forgot.vue?vue&type=script&lang=js&\"\nexport * from \"./Forgot.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69c99584\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('h1',{staticClass:\"mt-5 mb-3 text-center\"},[_vm._v(\"Bold Journaling\")]),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('div',{staticClass:\"w-50 mx-auto\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_vm._v(\"Set a new password\")]),_c('div',{staticClass:\"card-body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"E-mail\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.email),expression:\"login.email\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"readonly\":\"\"},domProps:{\"value\":(_vm.login.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.login, \"email\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"New password\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.password),expression:\"login.password\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.login.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.login, \"password\", $event.target.value)}}})]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Save\")])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n  <div class=\"container\">\n\n<h1 class=\"mt-5 mb-3 text-center\">Bold Journaling</h1>\n\n<div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\n\n<div class=\"w-50 mx-auto\">\n<div class=\"card\">\n  <div class=\"card-header\">Set a new password</div>\n  <div class=\"card-body\">\n\n        <form @submit.prevent=\"onSubmit\">\n            <div class=\"form-group\">\n              <label>E-mail</label>\n              <input type=\"text\" class=\"form-control\" v-model=\"login.email\" readonly>\n             </div>\n            <div class=\"form-group\">\n              <label>New password</label>\n              <input type=\"password\" class=\"form-control\" v-model=\"login.password\">\n             </div>\n            <!-- <p><label>token:</label><input type=\"text\" v-model=\"login.token\"></p> -->\n        <button type=\"submit\" class=\"btn btn-primary\">Save</button>\n        </form>\n\n  </div>\n  </div>\n  </div>\n  </div>\n\n\n</template>\n<style scoped>\n\n\n</style>\n\n<script>\n\nimport axios from 'axios';\n\nexport default {\n  // props:['id','page_id'],\n  data() {\n    return {\n      error:'',\n      login:{\n        email:'',\n        password:'',\n        token:'',\n      },\n    }\n  },\n\n  methods:{\n\n    onSubmit(){\n      this.error = '';\n      axios({\n        method: 'post',\n        url: '/api/new-password',\n        data: this.login\n      }).then((res)=>{\n          alert('New password successfully set');\n          this.$router.push('login')\n      }).catch((error)=>{\n          this.error = error.response.data;\n      });\n\n    },\n\n  },\n  mounted(){\n      var query = window.location.search.replace(/^\\?/,'');\n      var queryArr = query.split('&');\n      var obj = {};\n      for(var i in queryArr){\n          var parts = queryArr[i].split('=');\n          obj[parts[0]] = parts[1];\n      }\n\n      this.login.email = decodeURIComponent(obj.email)\n      this.login.token = decodeURIComponent(obj.token)\n  }\n\n}\n\n\n\n</script>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewPassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewPassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewPassword.vue?vue&type=template&id=2d8c4571&scoped=true&\"\nimport script from \"./NewPassword.vue?vue&type=script&lang=js&\"\nexport * from \"./NewPassword.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d8c4571\",\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-console */\n\nimport Vue from 'vue'\nimport Router from 'vue-router'\nimport axios from 'axios';\nimport store from '@/store';\n\nimport Dashboard from './views/Dashboard.vue'\nimport Note from './views/Note.vue'\nimport Block from './views/Block.vue'\n\nimport Login from './views/Login.vue'\nimport Forgot from './views/Forgot.vue'\nimport NewPassword from './views/NewPassword.vue'\n\n//import store from './store'\n\nVue.use(Router)\n\nconst router = new Router({\n  mode:'history',\n  routes: [\n    { path: '/', name: 'dashboard', component: Dashboard, meta: {restricted:true}, },\n\n    { path: '/login', name: 'login', component: Login, props: true, meta: {restricted:false}, },\n    { path: '/forgot', name: 'forgot', component: Forgot, props: true, meta: {restricted:false}, },\n    { path: '/new-password', name: 'new-password', component: NewPassword, props: true, meta: {restricted:false}, },\n\n    { path: '/:slug', name: 'note', component: Note, props: true, meta: {restricted:true}, },\n    { path: '/:slug/:id', name: 'block', component: Block, props: true, meta: {restricted:true}, },\n\n  ]\n})\n\n\nrouter.beforeEach((to, from, next) => {\n/*  window.scrollTo(0,0); */\n\n\tconsole.log('route beforeeach to: ',to.path);\n\n\tif(edited && $('[data-note]')){\n\t\tsaveAll();\n\t}\n\n  if(to.path=='/logout'){\n\n    axios({\n      method: 'get',\n      url: '/api/logout',\n    }).then((res)=>{\n      store.dispatch('setUser',{})\n    }).catch((error)=>{\n      console.log('error',error);\n    });\n\n    return next('/login');\n  }\n\n  if(!store.getters.isAuthenticated && to.meta.restricted){\n    store.dispatch('setIntendedUrl',to.path);\n    return next('/login');\n  }\n\n  next();\n\n});\n\nexport default router\n","import Vue from 'vue'\nimport App from './App.vue'\nimport axios from 'axios';\nimport helpers from './helpers.js';\nimport textareaHelpers from './textareaHelpers.js';\nimport keyboardHelpers from './keyboardHelpers.js';\nimport styles from './assets/style.css';\nimport router from '@/router';\nimport store from '@/store';\n\n\nwindow.Vue = Vue;\nVue.config.productionTip = false\n\naxios({\n\tmethod: 'get',\n\turl: '/api/user',\n}).then((res)=>{\n\tstore.dispatch('setUser',res.data)\n\tstore.dispatch('authInitialized')\n}).catch(()=>{\n\tstore.dispatch('authInitialized')\n}).finally(()=> {\n\twindow.vm = new Vue({\n\t\trouter,\n\t\tstore,\n\t\trender: h => h(App),\n\t}).$mount('#app')\n });\n\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=style&index=0&id=ad038b90&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=style&index=0&id=ad038b90&scoped=true&lang=css&\"","document.addEventListener(\"DOMContentLoaded\", function() {\n\n\n\tdocument.addEventListener('input',function(e){\n\t\tif(!e.target.matches('textarea')) return;\n\t\tsetInputHeight(e.target);\n\t});\n});\n\nwindow.setInputHeight = function(el){\n\n\tel.style.height = \"1.5em\";\n\tvar textareaHeight = el.scrollHeight;\n\n\tel.style.height = textareaHeight + \"px\";\n}\n\n\nwindow.removeTextareas = function(){\n\t$$('textarea').forEach(textarea=>{\n\t\tvar p = textarea.nextSibling;\n\t\tif(p && p.tagName=='P'){\n\t\t\tp.innerHTML = marked(textarea.value);\n\t\t\ttextarea.parentNode.removeChild(textarea);\n\t\t}\n\t});\n}\n\n\n\nwindow.getSelectionEnd = function(textareaDom,x,y){\n\tvar originalText = textareaDom.value;\n\tvar text = originalText;\n\n\tvar span = document.createElement('span');\n\tspan.className = 'calculate';\n\tspan.style.width = textareaDom.offsetWidth+'px';\n\n\tvar inner = document.createTextNode(text);\n\tspan.appendChild(inner);\n\n\tvar carret = document.createElement('span');\n\tcarret.id = 'carret';\n\tspan.appendChild(carret);\n\n\tdocument.body.appendChild(span);\n\n\tconsole.time('loopx');\n\twhile(carret.offsetLeft>x){\n\t\ttext = originalText.substr(0,text.length-1);\n\t\tinner.textContent = text;\n\t}\n\tconsole.timeEnd('loopx');\n\n\t$$('.calculate').forEach(span=>{\n\t\tspan.parentNode.removeChild(span);\n\t})\n\treturn text.length;\n}\n\nwindow.getSelectionStart = function(textareaDom,x){\n\n\tvar originalText = textareaDom.value;\n\tvar text = '';\n\n\tvar span = document.createElement('span');\n\tspan.className = 'calculate';\n\tspan.style.width = textareaDom.offsetWidth+'px';\n\n\tvar inner = document.createTextNode(text);\n\tspan.appendChild(inner);\n\n\tvar carret = document.createElement('span');\n\tcarret.id = 'carret';\n\tspan.appendChild(carret);\n\n\tdocument.body.appendChild(span);\n\n\twhile(carret.offsetLeft<x){\n\t\ttext = originalText.substr(0,text.length+1);\n\t\tinner.textContent = text;\n\t\tif(originalText.length==text.length) break;\n\t}\n\ttext = originalText.substr(0,text.length-1);\n\n\t$$('.calculate').forEach(span=>{\n\t\tspan.parentNode.removeChild(span);\n\t})\n\treturn text.length;\n\n}\n\nwindow.getCarretPosition = function(){\n\tvar textareaDom = $('textarea');\n\tvar span = document.createElement('span');\n\tspan.className = 'calculate';\n\tvar text = textareaDom.value.substr(0,textareaDom.selectionStart);\n\tspan.innerHTML = text + '<span id=\"carret\"></span>';\n\tspan.style.width = textareaDom.offsetWidth+'px';\n\n\tdocument.body.appendChild(span);\n\n\tvar carret = span.querySelector('#carret');\n\tvar ret = {\n\t\tx:carret.offsetLeft+4,\n\t\ty:carret.offsetTop,\n\t}\n\n\t$$('.calculate').forEach(span=>{\n\t\tspan.parentNode.removeChild(span);\n\t})\n\n\treturn ret;\n}\n\nwindow.isFirstLine = function(textareaDom){\n\tvar pos = getCarretPosition();\n\n\tconsole.log('getCarretPosition first line',pos);\n\n\treturn pos.y==0;\n}\n\nwindow.isLastLine = function(textareaDom){\n\n\tvar span = document.createElement('span');\n\tspan.className = 'calculate';\n\tspan.style.width = textareaDom.offsetWidth+'px';\n\tspan.innerHTML = textareaDom.value + '<span id=\"carret\"></span>';\n\n\tdocument.body.appendChild(span);\n\tvar carret = span.querySelector('#carret');\n\tvar ret = {\n\t\tx:carret.offsetLeft,\n\t\ty:carret.offsetTop,\n\t}\n\n\tvar pos = getCarretPosition();\n\n\tconsole.log('getCarretPosition last line',pos,ret);\n\n\treturn pos.y == ret.y;\n}\n"],"sourceRoot":""}