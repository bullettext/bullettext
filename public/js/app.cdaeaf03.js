(function(e){function t(t){for(var r,a,i=t[0],s=t[1],l=t[2],d=0,b=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&b.push(c[a][0]),c[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(b.length)b.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==c[s]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},c={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"037b":function(e,t,n){},"106d":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("e623"),n("e379"),n("5dc8"),n("37e1");var r=n("f2bf"),c={class:"wrapper-app"};function o(e,t,n,o,a,i){var s=Object(r["z"])("router-view"),l=Object(r["z"])("loader");return Object(r["s"])(),Object(r["d"])("div",c,[Object(r["g"])("main",null,[Object(r["g"])(s,{key:o.fullPath})]),Object(r["g"])(l)])}var a={class:"ajax-loader"},i=Object(r["g"])("div",{class:"loader-circle"},[Object(r["g"])("div",{class:"loader-line-mask"},[Object(r["g"])("div",{class:"loader-line"})]),Object(r["g"])("div",{class:"loader-img"})],-1),s={key:0};function l(e,t,n,c,o,l){return Object(r["I"])((Object(r["s"])(),Object(r["d"])("div",a,[i,c.loadingMessage?(Object(r["s"])(),Object(r["d"])("p",s,Object(r["B"])(c.loadingMessage),1)):Object(r["e"])("",!0)],512)),[[r["F"],c.isLoading]])}n("ac1f"),n("5319");var u=n("bc3a"),d=n.n(u),b=n("6c02"),f={key:0},O=Object(r["g"])("div",{class:"logo"},"Bullet",-1),p={key:1},g=Object(r["f"])("Dashboard");function j(e,t,n,c,o,a){var i=Object(r["z"])("global-search"),s=Object(r["z"])("router-link"),l=Object(r["z"])("router-view");return Object(r["s"])(),Object(r["d"])("div",null,[c.isAuthenticated?(Object(r["s"])(),Object(r["d"])("nav",f,[O,Object(r["g"])(i)])):Object(r["e"])("",!0),c.isAuthenticated?(Object(r["s"])(),Object(r["d"])("aside",p,[Object(r["g"])(s,{to:"/"},{default:Object(r["H"])((function(){return[g]})),_:1})])):Object(r["e"])("",!0),Object(r["g"])("main",null,[Object(r["g"])(l,{key:e.$route.fullPath})])])}n("b0c0");var v={class:"global-search"},m={class:"menu-search"};function h(e,t,n,c,o,a){return Object(r["s"])(),Object(r["d"])("div",v,[Object(r["g"])("form",{onSubmit:t[7]||(t[7]=Object(r["K"])((function(){}),["prevent"]))},[Object(r["I"])(Object(r["g"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.searchterm=e}),onInput:t[2]||(t[2]=function(){return c.input&&c.input.apply(c,arguments)}),onKeyup:[t[3]||(t[3]=Object(r["J"])((function(){return c.arrowDown&&c.arrowDown.apply(c,arguments)}),["arrow-down"])),t[4]||(t[4]=Object(r["J"])((function(){return c.arrowUp&&c.arrowUp.apply(c,arguments)}),["arrow-up"])),t[5]||(t[5]=Object(r["J"])((function(){return c.enter&&c.enter.apply(c,arguments)}),["enter"])),t[6]||(t[6]=Object(r["J"])((function(e){return c.searchterm=""}),["esc"]))]},null,544),[[r["E"],c.searchterm]])],32),Object(r["I"])(Object(r["g"])("div",m,[Object(r["g"])("ul",null,[(Object(r["s"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(c.results,(function(e,t){return Object(r["s"])(),Object(r["d"])("li",{class:{selected:t===c.selectedItem}},[Object(r["g"])("a",{class:"reference",href:e.slug,onClick:Object(r["K"])((function(t){return c.goto(e.slug)}),["prevent"]),innerHTML:c.hl(e.name)},null,8,["href","onClick","innerHTML"])],2)})),256)),Object(r["I"])(Object(r["g"])("li",{class:["newNote",{selected:c.results.length===c.selectedItem}]},[Object(r["g"])("a",{onClick:t[8]||(t[8]=function(e){return c.newNote()})},'new note "'+Object(r["B"])(c.searchterm)+'"',1)],2),[[r["F"],c.searchterm]])])],512),[[r["F"],c.menuOpen]])])}n("4de4"),n("caad6"),n("fb6a"),n("4d63"),n("25f0"),n("2532"),n("498a");var y={setup:function(e,t){var n=Object(b["d"])(),c=Object(r["w"])({searchterm:"",selectedItem:0}),o=Object(r["b"])((function(){if(!a)return[];var e=c.searchterm.toLowerCase().trim();return yt.state.notes.filter((function(t){return t.name.toLowerCase().includes(e)})).slice(0,10)})),a=Object(r["b"])((function(){return""!==c.searchterm})),i=function(){if(a&&null!==c.selectedItem){var e=o.value[c.selectedItem];if(e)return n.push(e.slug),void(c.searchterm="");f(),c.searchterm=""}},s=function(){c.selectedItem=0},l=function(e){return c.searchterm?e.replace(new RegExp("("+c.searchterm+")","i"),"<strong>$1</strong>"):e},u=function(){null!==c.selectedItem?(c.selectedItem++,c.selectedItem>o.value.length&&(c.selectedItem=0)):c.selectedItem=0},d=function(){null!==c.selectedItem?(c.selectedItem--,c.selectedItem<0&&(c.selectedItem=o.value.length)):c.selectedItem=o.value.length},f=function(){yt.newNote(c.searchterm),c.searchterm=""},O=function(e){n.push(e),c.searchterm=""},p=Object(r["C"])(c),g=p.searchterm,j=p.selectedItem;return{searchterm:g,menuOpen:a,selectedItem:j,results:o,enter:i,input:s,hl:l,arrowDown:u,arrowUp:d,newNote:f,goto:O}}};y.render=h;var x=y,k={components:{GlobalSearch:x},setup:function(){return Object(r["q"])((function(){yt.getNotesIndex()})),{isAuthenticated:yt.state.isAuthenticated}}};k.render=j;var w=k,I={class:"dashboard"},D={class:"container"},S=Object(r["g"])("div",{class:"d-flex align-items-center justify-content-between my-3"},[Object(r["g"])("h1",null,"Notes")],-1),B=Object(r["f"])(" new note: "),C={class:"notes"};function M(e,t,n,c,o,a){var i=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["d"])("div",I,[Object(r["g"])("div",D,[S,Object(r["g"])("form",{onSubmit:t[2]||(t[2]=Object(r["K"])((function(){return c.newNote&&c.newNote.apply(c,arguments)}),["prevent"]))},[B,Object(r["I"])(Object(r["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.noteName=e}),required:""},null,512),[[r["E"],c.noteName]])],32),Object(r["g"])("ul",C,[(Object(r["s"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(c.notes,(function(e){return Object(r["s"])(),Object(r["d"])("li",{key:e.id},[Object(r["g"])(i,{to:"/"+e.slug},{default:Object(r["H"])((function(){return[Object(r["f"])(Object(r["B"])(e.slug),1)]})),_:2},1032,["to"])])})),128))])])])}var _={setup:function(){var e=Object(r["x"])(""),t=function(){if(!e.value)return!1;yt.newNote(e.value)},n=Object(r["C"])(yt.state),c=n.notes;return{newNote:t,noteName:e,notes:c}}};_.render=M;var E=_,N={class:"info-saved"},T=Object(r["f"])("Saved"),U={class:"btn btn-sm",disabled:""},L=Object(r["f"])("Saving "),K={class:"my-3"},A={class:"blocks"};function z(e,t,n,c,o,a){var i=Object(r["z"])("ico"),s=Object(r["z"])("block-element"),l=Object(r["z"])("list-references");return Object(r["s"])(),Object(r["d"])("div",null,[c.note.id?(Object(r["s"])(),Object(r["d"])("div",{key:0,class:"container","data-note":c.note.id},[Object(r["g"])("div",N,[Object(r["g"])("button",{class:"btn btn-sm",disabled:!c.canUndo,onClick:t[1]||(t[1]=function(e){return c.undo()})},[Object(r["g"])(i,{size:"20",ico:"undo"})],8,["disabled"]),Object(r["g"])("button",{class:"btn btn-sm",disabled:!c.canRedo,onClick:t[2]||(t[2]=function(e){return c.redo()})},[Object(r["g"])(i,{size:"20",ico:"redo"})],8,["disabled"]),Object(r["I"])(Object(r["g"])("button",{class:"btn btn-sm text-muted",onClick:t[3]||(t[3]=function(){return c.saveAll&&c.saveAll.apply(c,arguments)}),title:c.infoSaved},[T,Object(r["I"])(Object(r["g"])("span",null," on "+Object(r["B"])(c.infoSaved),513),[[r["F"],c.infoSaved]])],8,["title"]),[[r["F"],!c.isSaving&&!c.canSave]]),Object(r["I"])(Object(r["g"])("button",{class:"btn btn-sm btn-primary",onClick:t[4]||(t[4]=function(){return c.saveAll&&c.saveAll.apply(c,arguments)})},"Save changes",512),[[r["F"],!c.isSaving&&c.canSave]]),Object(r["I"])(Object(r["g"])("button",U,[L,Object(r["g"])(i,{size:"20",ico:"loading",class:"spin"})],512),[[r["F"],c.isSaving]])]),Object(r["g"])("div",K,[Object(r["g"])("h1",null,Object(r["B"])(c.note.name),1)]),Object(r["g"])("p",null,"INDEX: "+Object(r["B"])(c.selectedIndex),1),Object(r["g"])("div",A,[(Object(r["s"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(c.note.blocks,(function(e,t){return Object(r["s"])(),Object(r["d"])(s,{key:c.keyElement(e,t),index:t,block:e,onOnKeydown:c.onKeydown},null,8,["index","block","onOnKeydown"])})),128))]),c.note.references.length?(Object(r["s"])(),Object(r["d"])(l,{key:0,references:c.note.references},null,8,["references"])):Object(r["e"])("",!0)],8,["data-note"])):Object(r["e"])("",!0)])}n("99af"),n("7db0"),n("4160"),n("a15b"),n("a434"),n("1276"),n("159b");var H=n("2909"),V={key:0,class:"references"},P=Object(r["g"])("h4",null,"References:",-1);function R(e,t,n,c,o,a){var i=Object(r["z"])("router-link");return c.references?(Object(r["s"])(),Object(r["d"])("div",V,[P,(Object(r["s"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(c.references,(function(e,t){return Object(r["s"])(),Object(r["d"])("div",{class:"reference-item",key:t},[e.note?(Object(r["s"])(),Object(r["d"])(i,{key:0,to:"/"+e.note.slug},{default:Object(r["H"])((function(){return[Object(r["f"])(Object(r["B"])(e.note.name),1)]})),_:2},1032,["to"])):Object(r["e"])("",!0),Object(r["g"])("p",null,Object(r["B"])(e.text),1)])})),128))])):Object(r["e"])("",!0)}n("d81d");var q={props:["references"],setup:function(e){var t=e.references,n=Object(r["b"])((function(){return yt.state.notes?t.map((function(e){return e.note=yt.state.notes.find((function(t){return t.id==e.note_id})),e})):[]}));return{references:n}}};q.render=R;var J=q;function $(e,t,n,c,o,a){return Object(r["s"])(),Object(r["d"])("div",{style:c.styleBlock(c.block.level),"data-index":c.index,"data-id":c.block.id,"data-temp_id":c.block.temp_id},[c.selectedIndex===c.index?Object(r["I"])((Object(r["s"])(),Object(r["d"])("textarea",{key:0,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.block.text=e}),ref:"textareaDOM",onInput:t[2]||(t[2]=function(){return c.setInputHeight&&c.setInputHeight.apply(c,arguments)}),onKeydown:t[3]||(t[3]=function(){return c.onKeydown&&c.onKeydown.apply(c,arguments)})},null,544)),[[r["E"],c.block.text]]):Object(r["e"])("",!0),Object(r["g"])("p",{onClick:t[4]||(t[4]=function(e){return c.onClickBlock(c.index,e)}),innerHTML:c.marked(c.block.text)},null,8,["innerHTML"])],12,["data-index","data-id","data-temp_id"])}n("466d");var F={props:["index","block"],setup:function(e,t){var n=Object(b["d"])(),c=e.block,o=e.index,a=Object(r["w"])({note:{blocks:[],references:[]},selectedIndex:Object(r["b"])((function(){return yt.state.selectedIndex})),textareaDOM:Object(r["b"])((function(){return yt.state.textareaDOM}))}),i={CtrlEnter:function(e){g()}};function s(e){if(!a.textareaDOM)return 0;void 0!==e&&(a.textareaDOM.selectionStart=e,a.textareaDOM.selectionEnd=e)}var l=function(e){return{marginLeft:"".concat(20*e,"px")}},u=function(e){console.log({onKeydown:e});var n="";e.ctrlKey&&(n+="Ctrl"),e.shiftKey&&(n+="Shift"),e.altKey&&(n+="Alt"),n+=e.key,"function"===typeof i[n]&&i[n](e),t.emit("onKeydown",e)},d=function(e){console.log("position",e),Object(r["m"])((function(){a.textareaDOM?(a.textareaDOM.focus(),s(e),f()):console.error("Textarea not found")}))},f=function(){a.textareaDOM.style.height="1.5em",a.textareaDOM.style.height="".concat(a.textareaDOM.scrollHeight,"px")},O=function(e){yt.state.selectedIndex=e;var t=window.getSelection().getRangeAt(0).endOffset;d(t)},p=function(e,t){if(!t.target.matches(".checkbox"))return t.target.matches(".reference")?(t.preventDefault(),void n.push({path:t.target.href})):void O(e,t);j(c)},g=function(){var e=c.text;e.match(/^\[\[(TODO|DONE)\]\]/)?e.match(/^\[\[TODO\]\]/)?e=e.replace(/^\[\[TODO\]\]/,"[[DONE]]"):e.match(/^\[\[DONE\]\]/)&&(e=e.replace(/^\[\[DONE\]\] */,"")):e="[[TODO]] "+e,c.text=e},j=function(e){var t=e.text;t.match(/^\[\[TODO\]\]/)?t=t.replace(/^\[\[TODO\]\]/,"[[DONE]]"):t.match(/^\[\[DONE\]\]/)&&(t=t.replace(/^\[\[DONE\]\]/,"[[TODO]]")),e.text=t},v=function(e){if(!e)return"";e=e.replace(/^\[\[TODO\]\]/,'<span class="checkbox"></span>'),e=e.replace(/^\[\[DONE\]\]/,'<span class="checkbox checked"></span>'),e=e.replace(/\*\*([^\*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/__([^_]+)__/g,"<strong>$1</strong>"),e=e.replace(/~~([^~]+)~~/g,"<del>$1</del>"),e=e.replace(/\*([^\*]+)\*/g,"<em>$1</em>"),e=e.replace(/_([^_]+)_/g,"<em>$1</em>");var t=e.match(/\[\[([^\]]+)\]\]/g);return t&&t.forEach((function(t){var n=t.replace(/[\[\]]/g,""),r=yt.state.notes.find((function(e){return e.name==n}));r&&(e=e.replace(t,'<a class="reference" href="/'.concat(r.slug,'">').concat(t,"</a>")))})),e},m=Object(r["C"])(a),h=m.selectedIndex,y=Object(r["C"])(yt.state),x=y.textareaDOM;return{selectedIndex:h,styleBlock:l,textareaDOM:x,marked:v,onClickBlock:p,setInputHeight:f,onKeydown:u,block:c,index:o}}};F.render=$;var Z=F,G=Object(r["L"])("data-v-7eeac4fe");Object(r["v"])("data-v-7eeac4fe");var X={key:0,viewBox:"0 0 24 24"},Q=Object(r["g"])("path",{fill:"currentColor",d:"M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z"},null,-1),W={key:1,viewBox:"0 0 24 24"},Y=Object(r["g"])("path",{fill:"currentColor",d:"M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z"},null,-1),ee={key:2,viewBox:"0 0 24 24"},te=Object(r["g"])("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"},null,-1);Object(r["t"])();var ne=G((function(e,t,n,c,o,a){return Object(r["s"])(),Object(r["d"])("span",{style:a.icoStyle},["undo"==n.ico?(Object(r["s"])(),Object(r["d"])("svg",X,[Q])):Object(r["e"])("",!0),"redo"==n.ico?(Object(r["s"])(),Object(r["d"])("svg",W,[Y])):Object(r["e"])("",!0),"loading"==n.ico?(Object(r["s"])(),Object(r["d"])("svg",ee,[te])):Object(r["e"])("",!0)],4)})),re={props:["ico","size"],computed:{icoStyle:function(){return{display:"inline-block",width:this.size+"px",height:this.size+"px"}}}};n("775a");re.render=ne,re.__scopeId="data-v-7eeac4fe";var ce=re,oe={components:{ListReferences:J,BlockElement:Z,Ico:ce},props:["slug"],setup:function(e,t){var n=null,c=Object(r["w"])({note:{blocks:[],references:[]},selectedIndex:Object(r["b"])((function(){return yt.state.selectedIndex})),textareaDOM:Object(r["b"])((function(){return yt.state.textareaDOM})),currentBlock:Object(r["b"])((function(){return c.note.blocks[c.selectedIndex]})),nextBlock:Object(r["b"])((function(){return c.note.blocks[c.selectedIndex+1]})),previusBlock:Object(r["b"])((function(){return c.note.blocks[c.selectedIndex-1]})),historyCursor:-1,history:[],historyDisabled:!1,edited:!1,lastSavedTime:null,version:"0"}),o={ArrowUp:function(e){if(c.previusBlock&&m()){e.preventDefault(),yt.state.selectedIndex--;var t=g()+v();I(t)}},ArrowDown:function(e){if(c.nextBlock&&h()){var t=g()-v();t=Math.min(t,c.nextBlock.text.split("\n")[0].length),yt.state.selectedIndex++,I(t)}},ShiftAltArrowUp:function(e){c.previusBlock&&(e.preventDefault(),w(c.selectedIndex-1,x()),yt.state.selectedIndex--,k(),I(g()))},ShiftAltArrowDown:function(e){c.nextBlock&&(e.preventDefault(),w(c.selectedIndex+1,x()),yt.state.selectedIndex++,k(),I(g()))},Tab:function(e){e.preventDefault(),c.previusBlock&&(c.currentBlock.level=Math.min(c.previusBlock.level+1,c.currentBlock.level+1))},ShiftTab:function(e){e.preventDefault(),c.previusBlock&&(c.currentBlock.level=Math.max(c.currentBlock.level-1,0))},Delete:function(e){if(g()===c.currentBlock.text.length&&c.nextBlock){e.preventDefault();var t=c.currentBlock.text.length;c.currentBlock.text+=c.nextBlock.text,x(1),I(t)}},ShiftDelete:function(e){e.preventDefault(),x(),I(0)},Backspace:function(e){if(0===g()&&c.previusBlock){e.preventDefault();var t=c.previusBlock.text.length;c.previusBlock.text+=c.currentBlock.text,x(),yt.state.selectedIndex--,I(t)}},Enter:function(e){e.preventDefault();var t=g(),n=c.currentBlock.text.substr(0,t),r=c.currentBlock.text.substr(t);c.currentBlock.text=n;var o={text:r,parent_id:c.currentBlock.parent_id,level:c.currentBlock.level,temp_id:"temp".concat((new Date).getTime())};w(c.selectedIndex+1,o),yt.state.selectedIndex++,I(0)}},a=Object(r["b"])((function(){return!(c.historyCursor!=c.history.length-1||!c.edited)||c.historyCursor>0})),i=Object(r["b"])((function(){return c.edited})),s=Object(r["b"])((function(){return c.historyCursor<c.history.length-1})),l=Object(r["b"])((function(){return"Saving"==c.lastSavedTime})),u=Object(r["b"])((function(){if("Saving"==c.lastSavedTime)return"Saving...";if(null===c.lastSavedTime)return"";var e=c.lastSavedTime,t=("0"+e.getHours()).substr(-2),n=("0"+e.getMinutes()).substr(-2),r=("0"+e.getSeconds()).substr(-2);return"".concat(t,":").concat(n,":").concat(r)})),b=function(){if(a){if(c.edited&&c.historyCursor==c.history.length-1){var e=c.historyCursor;return p(),c.historyCursor=e,f(c.history[c.historyCursor]),void(c.edited=!1)}0!=c.historyCursor&&(c.historyDisabled=!0,c.historyCursor--,f(c.history[c.historyCursor]),c.historyDisabled=!1)}},f=function(e){console.log("reload",JSON.parse(e)),c.note.blocks=JSON.parse(e),c.version=(new Date).getTime(),c.edited=!0},O=function(){s&&(c.historyDisabled=!0,c.historyCursor++,f(c.history[c.historyCursor]),c.historyDisabled=!1)},p=function(){console.log("pushHistory");var e=JSON.stringify(c.note.blocks);c.historyDisabled||e===c.history[c.historyCursor]||(c.historyCursor++,c.history.splice(c.historyCursor,c.history.length-c.historyCursor,e))};function g(e){return c.textareaDOM?void 0===e?c.textareaDOM.selectionStart:(c.textareaDOM.selectionStart=e,void(c.textareaDOM.selectionEnd=e)):0}var j=function(e,t){var n=e.id?"id-".concat(e.id):"temp_id-".concat(e.temp_id);return"index-".concat(t,"-").concat(n,"-h").concat(c.version)},v=function(){var e=c.currentBlock.text.split("\n");return e.pop(),e.join("\n").length},m=function(){var e=c.currentBlock.text.split("\n");return e[0].length>=g()},h=function(){var e=c.currentBlock.text.split("\n");return e.pop(),e.join("\n").length<=g()},y=function(e){c.edited=!0,clearTimeout(n),n=setTimeout((function(){S()}),5e3);var t="";e.ctrlKey&&(t+="Ctrl"),e.shiftKey&&(t+="Shift"),e.altKey&&(t+="Alt"),t+=e.key,"function"===typeof o[t]&&(console.log("Key down: ".concat(t,"\n---")),o[t](e))},x=function(e){e||(e=0);var t=c.note.blocks.splice(c.selectedIndex+e,1);return k(),t[0]},k=function(){var e={level:0};c.note.blocks[0].level=0,c.note.blocks.forEach((function(t){t.level-e.level>1&&(t.level=e.level+1),e=t}))},w=function(e,t){c.note.blocks.splice(e,0,t)},I=function(e){console.log("position",e),Object(r["m"])((function(){console.log("textarea depois",c.textareaDOM),c.textareaDOM.focus(),g(e),D()}))},D=function(){c.textareaDOM.style.height="1.5em",c.textareaDOM.style.height="".concat(c.textareaDOM.scrollHeight,"px")},S=function(){console.log("saving"),clearTimeout(n),c.lastSavedTime="Saving",c.edited=!1,k();var e=c.note.id,t=c.note.blocks,r=[];t.forEach((function(e,t){r[e.level]=e.id||e.temp_id,e.parent_id=0==e.level?null:r[e.level-1],e.order=t})),console.log(t),d()({method:"post",url:"/api/notes/save-blocks/"+e,data:t}).then((function(e){console.log(e),B(e.data.temp_ids),p(),yt.state.notes=[].concat(Object(H["a"])(e.data.new_notes),Object(H["a"])(yt.state.notes)),c.lastSavedTime=new Date})).catch((function(e){console.error("save error"),console.error(e)}))},B=function(e){for(var t in e){var n=c.note.blocks.find((function(e){return e.temp_id==t}));n.id=e[t],n.temp_id=null,console.log("".concat(t," updated to id ").concat(n.id))}};Object(r["q"])((function(){yt.getNote(e.slug).then((function(e){if(c.note=e.data,0==e.data.blocks.length){var t={text:"",level:0,temp_id:"temp".concat((new Date).getTime())};e.data.blocks.push(t),yt.state.selectedIndex=0,I(0)}else yt.state.selectedIndex=0,e.data.blocks[0].text?I(e.data.blocks[0].text.length):I(0);p()}))})),Object(r["o"])((function(){c.edited&&S()}));var C=Object(r["C"])(c),M=C.note,_=C.history,E=C.historyCursor,N=Object(r["C"])(yt.state),T=N.selectedIndex;return{note:M,keyElement:j,selectedIndex:T,onKeydown:y,saveAll:S,infoSaved:u,undo:b,redo:O,canUndo:a,canRedo:s,isSaving:l,canSave:i,history:_,historyCursor:E}}};oe.render=z;var ae=oe,ie={class:"container"},se=Object(r["g"])("h1",{class:"mt-5 mb-3 text-center"},"Bullet Text",-1),le={key:0,class:"alert alert-danger"},ue={class:"row"},de={class:"col-lg-6"},be={class:"card"},fe=Object(r["g"])("div",{class:"card-header"},"Login",-1),Oe={class:"card-body"},pe={class:"form-group"},ge={class:"form-group"},je={class:"form-text text-muted text-right"},ve=Object(r["f"])("forgot password"),me=Object(r["g"])("button",{class:"btn btn-primary",type:"submit"},"Login",-1),he={class:"col-lg-6"},ye={class:"card"},xe=Object(r["g"])("div",{class:"card-header"},"Register",-1),ke={class:"card-body"},we={class:"form-group"},Ie={class:"form-group"},De={class:"form-group"},Se=Object(r["g"])("button",{class:"btn btn-primary",type:"submit"},"Register",-1);function Be(e,t,n,c,o,a){var i=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["d"])("div",ie,[se,c.error?(Object(r["s"])(),Object(r["d"])("div",le,Object(r["B"])(c.error),1)):Object(r["e"])("",!0),Object(r["g"])("div",ue,[Object(r["g"])("div",de,[Object(r["g"])("div",be,[fe,Object(r["g"])("div",Oe,[Object(r["g"])("form",{onSubmit:t[3]||(t[3]=Object(r["K"])((function(){return c.onSubmitLogin&&c.onSubmitLogin.apply(c,arguments)}),["prevent"]))},[Object(r["g"])("div",pe,[Object(r["I"])(Object(r["g"])("input",{type:"email",placeholder:"E-mail",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.login.email=e}),required:""},null,512),[[r["E"],c.login.email]])]),Object(r["g"])("div",ge,[Object(r["I"])(Object(r["g"])("input",{type:"password",placeholder:"Password",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.login.password=e}),required:""},null,512),[[r["E"],c.login.password]]),Object(r["g"])("small",je,[Object(r["g"])(i,{to:"forgot"},{default:Object(r["H"])((function(){return[ve]})),_:1})])]),me],32)])])]),Object(r["g"])("div",he,[Object(r["g"])("div",ye,[xe,Object(r["g"])("div",ke,[Object(r["g"])("form",{onSubmit:t[7]||(t[7]=Object(r["K"])((function(){return c.onSubmitRegister&&c.onSubmitRegister.apply(c,arguments)}),["prevent"]))},[Object(r["g"])("div",we,[Object(r["I"])(Object(r["g"])("input",{type:"text",placeholder:"Name","onUpdate:modelValue":t[4]||(t[4]=function(e){return c.register.name=e}),class:"form-control",required:""},null,512),[[r["E"],c.register.name]])]),Object(r["g"])("div",Ie,[Object(r["I"])(Object(r["g"])("input",{type:"text",placeholder:"E-mail","onUpdate:modelValue":t[5]||(t[5]=function(e){return c.register.email=e}),class:"form-control",required:""},null,512),[[r["E"],c.register.email]])]),Object(r["g"])("div",De,[Object(r["I"])(Object(r["g"])("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[6]||(t[6]=function(e){return c.register.password=e}),class:"form-control",required:""},null,512),[[r["E"],c.register.password]])]),Se],32)])])])])])}var Ce={setup:function(){var e=Object(b["d"])(),t=Object(r["w"])({error:"",login:{email:"",password:""},register:{name:"",email:"",password:""}}),n=function(){t.error="",d()({method:"post",url:"/api/login",data:t.login}).then((function(t){yt.setUser(t.data);var n=yt.state.intendedUrl;"/login"!=n&&n||(n="/"),e.push({path:n})})).catch((function(e){t.error=e.response.data}))},c=function(){t.error="",d()({method:"post",url:"/api/register",data:t.register}).then((function(t){yt.setUser(t.data);var n=yt.state.intendedUrl;"/login"!=n&&n||(n="/"),e.push({path:n})})).catch((function(e){t.error=e.response.data}))};Object(r["q"])((function(){console.log("login")}));var o=Object(r["C"])(t),a=o.error,i=o.login,s=o.register;return{store:yt,router:e,error:a,login:i,register:s,onSubmitLogin:n,onSubmitRegister:c}}};Ce.render=Be;var Me=Ce,_e=Object(r["L"])("data-v-6e1ae4d9");Object(r["v"])("data-v-6e1ae4d9");var Ee={class:"container"},Ne=Object(r["g"])("h1",{class:"mt-5 mb-3 text-center"},"Bullet Text",-1),Te={key:0,class:"alert alert-danger"},Ue={class:"w-50 mx-auto"},Le={class:"card"},Ke=Object(r["g"])("div",{class:"card-header"},"Password recovery",-1),Ae={class:"card-body"},ze={class:"form-group"},He=Object(r["g"])("label",null,"E-mail",-1),Ve=Object(r["g"])("button",{type:"submit",class:"btn btn-primary"},"Recover",-1),Pe={class:"text-center mt-3"},Re=Object(r["f"])("Back to login");Object(r["t"])();var qe=_e((function(e,t,n,c,o,a){var i=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["d"])("div",Ee,[Ne,o.error?(Object(r["s"])(),Object(r["d"])("div",Te,Object(r["B"])(o.error),1)):Object(r["e"])("",!0),Object(r["g"])("div",Ue,[Object(r["g"])("div",Le,[Ke,Object(r["g"])("div",Ae,[Object(r["g"])("form",{onSubmit:t[2]||(t[2]=Object(r["K"])((function(){return a.onSubmit&&a.onSubmit.apply(a,arguments)}),["prevent"]))},[Object(r["g"])("div",ze,[He,Object(r["I"])(Object(r["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.login.email=e}),required:""},null,512),[[r["E"],o.login.email]])]),Ve],32)])]),Object(r["g"])("p",Pe,[Object(r["g"])(i,{to:"login"},{default:_e((function(){return[Re]})),_:1})])])])})),Je={data:function(){return{error:"",login:{email:""}}},methods:{onSubmit:function(){var e=this;this.error="",d()({method:"post",url:"/api/forgot",data:this.login}).then((function(e){alert("mensagem enviada")})).catch((function(t){e.error=t.response.data}))}},mounted:function(){}};Je.render=qe,Je.__scopeId="data-v-6e1ae4d9";var $e=Je,Fe=Object(r["L"])("data-v-52fcf5f6");Object(r["v"])("data-v-52fcf5f6");var Ze={class:"container"},Ge=Object(r["g"])("h1",{class:"mt-5 mb-3 text-center"},"Bullet Text",-1),Xe={key:0,class:"alert alert-danger"},Qe={class:"w-50 mx-auto"},We={class:"card"},Ye=Object(r["g"])("div",{class:"card-header"},"Set a new password",-1),et={class:"card-body"},tt={class:"form-group"},nt=Object(r["g"])("label",null,"E-mail",-1),rt={class:"form-group"},ct=Object(r["g"])("label",null,"New password",-1),ot=Object(r["g"])("button",{type:"submit",class:"btn btn-primary"},"Save",-1);Object(r["t"])();var at=Fe((function(e,t,n,c,o,a){return Object(r["s"])(),Object(r["d"])("div",Ze,[Ge,o.error?(Object(r["s"])(),Object(r["d"])("div",Xe,Object(r["B"])(o.error),1)):Object(r["e"])("",!0),Object(r["g"])("div",Qe,[Object(r["g"])("div",We,[Ye,Object(r["g"])("div",et,[Object(r["g"])("form",{onSubmit:t[3]||(t[3]=Object(r["K"])((function(){return a.onSubmit&&a.onSubmit.apply(a,arguments)}),["prevent"]))},[Object(r["g"])("div",tt,[nt,Object(r["I"])(Object(r["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.login.email=e}),readonly:""},null,512),[[r["E"],o.login.email]])]),Object(r["g"])("div",rt,[ct,Object(r["I"])(Object(r["g"])("input",{type:"password",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.login.password=e})},null,512),[[r["E"],o.login.password]])]),ot],32)])])])])})),it=(n("841c"),{data:function(){return{error:"",login:{email:"",password:"",token:""}}},methods:{onSubmit:function(){var e=this;this.error="",d()({method:"post",url:"/api/new-password",data:this.login}).then((function(t){alert("New password successfully set"),e.$router.push("login")})).catch((function(t){e.error=t.response.data}))}},mounted:function(){var e=window.location.search.replace(/^\?/,""),t=e.split("&"),n={};for(var r in t){var c=t[r].split("=");n[c[0]]=c[1]}this.login.email=decodeURIComponent(n.email),this.login.token=decodeURIComponent(n.token)}});it.render=at,it.__scopeId="data-v-52fcf5f6";var st=it,lt=Object(b["a"])({history:Object(b["b"])("/"),routes:[{path:"/login",name:"login",component:Me,props:!0,meta:{restricted:!1}},{path:"/forgot",name:"forgot",component:$e,props:!0,meta:{restricted:!1}},{path:"/new-password",name:"new-password",component:st,props:!0,meta:{restricted:!1}},{path:"/",name:"dashboard",component:w,meta:{restricted:!0},children:[{path:"/",name:"list",component:E,meta:{restricted:!0}},{path:"/:slug",name:"note",component:ae,props:!0,meta:{restricted:!0}}]}]});lt.beforeEach((function(e,t,n){return console.log("route before each to: ",e.path),"/logout"==e.path?(d()({method:"get",url:"/api/logout"}).then((function(e){yt.setUser({})})).catch((function(e){console.log("error",e)})),n("/login")):(console.log("store.isAuthenticated",yt.state.isAuthenticated),!yt.state.isAuthenticated&&e.meta.restricted?(console.log("next login"),yt.setIntendedUrl(e.path),n("/login")):void n())}));var ut=lt,dt=Object(r["w"])({user:{id:null,email:"",is_admin:!1},authInitialized:!1,intendedUrl:"",notes:[],note:{},blocks:[],loading:0,loadingMessage:"",selectedIndex:-1,textareaDOM:null,isAuthenticated:Object(r["b"])((function(){return dt.authInitialized&&dt.user&&dt.user.id}))}),bt=function(){dt.loading+=1},ft=function(){dt.loading>0&&(dt.loading-=1),0==dt.loading&&dt.loadingMessage&&Ot("")},Ot=function(e){dt.loadingMessage=e},pt=function(e){dt.user=e},gt=function(e){dt.intendedUrl=e},jt=function(){dt.authInitialized=!0},vt=function(){bt(),d()({url:"/api/notes"}).then((function(e){dt.notes=e.data})).finally((function(){ft()}))},mt=function(e){return bt(),d()({url:"/api/notes/"+e}).then((function(e){return e})).catch((function(e){console.error("No permisson to view this project","Error","#cc0000"),ut.replace("/")})).finally((function(){ft()}))},ht=function(e){bt();var t={name:e};return d()({method:"post",url:"/api/notes",data:t}).then((function(e){return ut.push({path:e.data.slug}),vt(),e})).finally((function(){ft()}))},yt={state:dt,getNote:mt,startLoading:bt,getNotesIndex:vt,authInitialized:jt,setUser:pt,setIntendedUrl:gt,newNote:ht},xt={setup:function(){var e=Object(r["b"])((function(){return yt.state.loading})),t=Object(r["b"])((function(){return yt.state.loadingMessage}));return{isLoading:e,loadingMessage:t}}};n("6a59");xt.render=l;var kt=xt,wt={components:{Loader:kt},setup:function(){var e=Object(b["c"])();Object(r["q"])((function(){}));var t=Object(r["C"])(yt.state),n=t.loading;return{startLoading:yt.startLoading,loading:n,fullPath:e.fullPath}}};wt.render=o;var It=wt;n("7d05");window.Vue=r["default"],d()({method:"get",url:"/api/user"}).then((function(e){yt.setUser(e.data)})).catch((function(){})).finally((function(){yt.authInitialized();var e=Object(r["c"])(It);e.use(ut),e.mount("#app")}))},"6a59":function(e,t,n){"use strict";n("106d")},"775a":function(e,t,n){"use strict";n("037b")},"7d05":function(e,t,n){}});
//# sourceMappingURL=app.cdaeaf03.js.map