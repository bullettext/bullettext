(function(e){function t(t){for(var r,a,i=t[0],s=t[1],l=t[2],d=0,b=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&b.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(b.length)b.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==o[s]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"106d":function(e,t,n){},"52bd":function(e,t,n){"use strict";n("9e10")},"56d7":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("e623"),n("e379"),n("5dc8"),n("37e1");var r=n("f2bf"),o={class:"wrapper-app"};function c(e,t,n,c,a,i){var s=Object(r["z"])("router-view"),l=Object(r["z"])("loader");return Object(r["s"])(),Object(r["d"])("div",o,[Object(r["g"])(s,{key:c.fullPath}),Object(r["g"])(l)])}var a={class:"ajax-loader"},i=Object(r["g"])("div",{class:"loader-circle"},[Object(r["g"])("div",{class:"loader-line-mask"},[Object(r["g"])("div",{class:"loader-line"})]),Object(r["g"])("div",{class:"loader-img"})],-1),s={key:0};function l(e,t,n,o,c,l){return Object(r["I"])((Object(r["s"])(),Object(r["d"])("div",a,[i,o.loadingMessage?(Object(r["s"])(),Object(r["d"])("p",s,Object(r["B"])(o.loadingMessage),1)):Object(r["e"])("",!0)],512)),[[r["F"],o.isLoading]])}n("ac1f"),n("5319");var u=n("bc3a"),d=n.n(u),b=n("6c02"),O=(n("b0c0"),Object(r["g"])("div",{class:"logo"},"Bullet",-1)),f=Object(r["f"])("Dashboard");function p(e,t,n,o,c,a){var i=Object(r["z"])("global-search"),s=Object(r["z"])("router-link"),l=Object(r["z"])("router-view");return Object(r["s"])(),Object(r["d"])("div",null,[Object(r["g"])("aside",null,[O,Object(r["g"])(i),Object(r["g"])(s,{to:"/"},{default:Object(r["H"])((function(){return[f]})),_:1}),Object(r["g"])("ul",null,[(Object(r["s"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(o.favoriteNotes,(function(e){return Object(r["s"])(),Object(r["d"])("li",null,[Object(r["g"])(s,{to:"/"+e.slug},{default:Object(r["H"])((function(){return[Object(r["f"])(Object(r["B"])(e.name),1)]})),_:2},1032,["to"])])})),256))])]),Object(r["g"])("main",null,[Object(r["g"])(l,{key:e.$route.fullPath})])])}n("4de4");var g={class:"menu-search"};function j(e,t,n,o,c,a){return Object(r["s"])(),Object(r["d"])("div",{class:["global-search",{active:o.menuOpen}]},[Object(r["I"])(Object(r["g"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.searchterm=e}),onInput:t[2]||(t[2]=function(){return o.input&&o.input.apply(o,arguments)}),onKeyup:[t[3]||(t[3]=Object(r["J"])((function(){return o.arrowDown&&o.arrowDown.apply(o,arguments)}),["arrow-down"])),t[4]||(t[4]=Object(r["J"])((function(){return o.arrowUp&&o.arrowUp.apply(o,arguments)}),["arrow-up"])),t[5]||(t[5]=Object(r["J"])((function(){return o.enter&&o.enter.apply(o,arguments)}),["enter"])),t[6]||(t[6]=Object(r["J"])((function(e){return o.searchterm=""}),["esc"]))],placeholder:"Search or new"},null,544),[[r["E"],o.searchterm]]),Object(r["I"])(Object(r["g"])("div",g,[Object(r["g"])("ul",null,[(Object(r["s"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(o.results,(function(e,t){return Object(r["s"])(),Object(r["d"])("li",{class:{selected:t===o.selectedItem}},[Object(r["g"])("a",{class:"reference",href:e.slug,onClick:Object(r["K"])((function(t){return o.goto(e.slug)}),["prevent"]),innerHTML:o.hl(e.name)},null,8,["href","onClick","innerHTML"])],2)})),256)),Object(r["I"])(Object(r["g"])("li",{class:["newNote",{selected:o.results.length===o.selectedItem}]},[Object(r["g"])("a",{onClick:t[7]||(t[7]=function(e){return o.newNote()})},'new note "'+Object(r["B"])(o.searchterm)+'"',1)],2),[[r["F"],o.searchterm]])])],512),[[r["F"],o.menuOpen]])],2)}n("caad"),n("fb6a"),n("4d63"),n("25f0"),n("2532"),n("498a");var v={setup:function(e,t){var n=Object(b["d"])(),o=Object(r["w"])({searchterm:"",selectedItem:0}),c=Object(r["b"])((function(){if(!a)return[];var e=o.searchterm.toLowerCase().trim();return kt.state.notes.filter((function(t){return t.name.toLowerCase().includes(e)})).slice(0,10)})),a=Object(r["b"])((function(){return""!==o.searchterm})),i=function(){if(a&&null!==o.selectedItem){var e=c.value[o.selectedItem];if(e)return n.push(e.slug),void(o.searchterm="");O(),o.searchterm=""}},s=function(){o.selectedItem=0},l=function(e){return o.searchterm?e.replace(new RegExp("("+o.searchterm+")","i"),"<strong>$1</strong>"):e},u=function(){null!==o.selectedItem?(o.selectedItem++,o.selectedItem>c.value.length&&(o.selectedItem=0)):o.selectedItem=0},d=function(){null!==o.selectedItem?(o.selectedItem--,o.selectedItem<0&&(o.selectedItem=c.value.length)):o.selectedItem=c.value.length},O=function(){kt.newNote(o.searchterm),o.searchterm=""},f=function(e){n.push(e),o.searchterm=""},p=Object(r["C"])(o),g=p.searchterm,j=p.selectedItem;return{searchterm:g,menuOpen:a,selectedItem:j,results:c,enter:i,input:s,hl:l,arrowDown:u,arrowUp:d,newNote:O,goto:f}}};v.render=j;var m=v,h={components:{GlobalSearch:m},setup:function(){Object(r["q"])((function(){kt.getNotesIndex(),console.log("store.state.notes",kt.state.notes)}));var e=Object(r["b"])((function(){return kt.state.notes.filter((function(e){return e.is_favorite}))}));return{favoriteNotes:e}}};h.render=p;var x=h,y={class:"dashboard"},E={class:"container"},_=Object(r["g"])("h1",null,"Notes",-1);function P(e,t,n,o,c,a){var i=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["d"])("div",y,[Object(r["g"])("div",E,[_,Object(r["g"])("ul",null,[(Object(r["s"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(o.notes,(function(e){return Object(r["s"])(),Object(r["d"])("li",{key:e.id},[Object(r["g"])(i,{to:"/"+e.slug},{default:Object(r["H"])((function(){return[Object(r["f"])(Object(r["B"])(e.name),1)]})),_:2},1032,["to"])])})),128))])])])}var k={setup:function(){var e=Object(r["C"])(kt.state),t=e.notes;return{notes:t}}};k.render=P;var S=k,w={class:"note"},A={class:"info-saved"},B=Object(r["f"])("Saved"),U={class:"info-msg",disabled:""},I=Object(r["f"])("Saving "),D={class:"blocks"};function L(e,t,n,o,c,a){var i=Object(r["z"])("ico"),s=Object(r["z"])("block-element"),l=Object(r["z"])("list-references");return Object(r["s"])(),Object(r["d"])("div",w,[o.note.id?(Object(r["s"])(),Object(r["d"])("div",{key:0,class:"container","data-note":o.note.id},[Object(r["g"])("header",null,[Object(r["g"])("div",A,[Object(r["g"])("button",{disabled:!o.canUndo,onClick:t[1]||(t[1]=function(e){return o.undo()})},[Object(r["g"])(i,{size:"20",ico:"undo"})],8,["disabled"]),Object(r["g"])("button",{disabled:!o.canRedo,onClick:t[2]||(t[2]=function(e){return o.redo()})},[Object(r["g"])(i,{size:"20",ico:"redo"})],8,["disabled"]),Object(r["I"])(Object(r["g"])("button",{class:"info-msg",onClick:t[3]||(t[3]=function(){return o.saveAll&&o.saveAll.apply(o,arguments)}),title:o.infoSaved},[B,Object(r["I"])(Object(r["g"])("span",null," on "+Object(r["B"])(o.infoSaved),513),[[r["F"],o.infoSaved]])],8,["title"]),[[r["F"],!o.isSaving&&!o.canSave]]),Object(r["I"])(Object(r["g"])("button",{class:"info-msg",onClick:t[4]||(t[4]=function(){return o.saveAll&&o.saveAll.apply(o,arguments)})},"Save changes",512),[[r["F"],!o.isSaving&&o.canSave]]),Object(r["I"])(Object(r["g"])("button",U,[I,Object(r["g"])(i,{size:"20",ico:"loading",class:"spin"})],512),[[r["F"],o.isSaving]])]),Object(r["g"])("h1",null,Object(r["B"])(o.note.name),1),Object(r["g"])("span",{onClick:t[5]||(t[5]=function(){return o.toggleFavorite&&o.toggleFavorite.apply(o,arguments)}),class:"toggleFavorite"},[o.note.is_favorite?Object(r["e"])("",!0):(Object(r["s"])(),Object(r["d"])(i,{key:0,ico:"star-empty",size:"20"})),o.note.is_favorite?(Object(r["s"])(),Object(r["d"])(i,{key:1,ico:"star",size:"20"})):Object(r["e"])("",!0)])]),Object(r["g"])("div",D,[(Object(r["s"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(o.note.blocks,(function(e,t){return Object(r["s"])(),Object(r["d"])(s,{key:o.keyElement(e,t),index:t,block:e,onOnKeydown:o.onKeydown},null,8,["index","block","onOnKeydown"])})),128))]),o.note.references.length?(Object(r["s"])(),Object(r["d"])(l,{key:0,references:o.note.references},null,8,["references"])):Object(r["e"])("",!0)],8,["data-note"])):Object(r["e"])("",!0)])}n("99af"),n("7db0"),n("4160"),n("a15b"),n("a434"),n("1276"),n("159b");var V=n("2909"),C={key:0,class:"references"},M=Object(r["g"])("h4",null,"References:",-1);function R(e,t,n,o,c,a){var i=Object(r["z"])("router-link");return o.references?(Object(r["s"])(),Object(r["d"])("div",C,[M,(Object(r["s"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(o.references,(function(e,t){return Object(r["s"])(),Object(r["d"])("div",{class:"reference-item",key:t},[e.note?(Object(r["s"])(),Object(r["d"])(i,{key:0,to:"/"+e.note.slug},{default:Object(r["H"])((function(){return[Object(r["f"])(Object(r["B"])(e.note.name),1)]})),_:2},1032,["to"])):Object(r["e"])("",!0),Object(r["g"])("p",null,Object(r["B"])(e.text),1)])})),128))])):Object(r["e"])("",!0)}n("d81d");var N={props:["references"],setup:function(e){var t=e.references,n=Object(r["b"])((function(){return kt.state.notes?t.map((function(e){return e.note=kt.state.notes.find((function(t){return t.id==e.note_id})),e})):[]}));return{references:n}}};N.render=R;var T=N;function z(e,t,n,o,c,a){var i=Object(r["z"])("context-menu");return Object(r["s"])(),Object(r["d"])("div",{style:o.styleBlock(o.block.level),"data-index":o.index,"data-id":o.block.id,"data-temp_id":o.block.temp_id},[o.selectedIndex===o.index?Object(r["I"])((Object(r["s"])(),Object(r["d"])("textarea",{key:0,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.block.text=e}),ref:"textareaDOM",onInput:t[2]||(t[2]=function(){return o.setInputHeight&&o.setInputHeight.apply(o,arguments)}),onKeydown:t[3]||(t[3]=function(){return o.onKeydown&&o.onKeydown.apply(o,arguments)})},null,544)),[[r["E"],o.block.text]]):Object(r["e"])("",!0),Object(r["g"])("p",{onClick:t[4]||(t[4]=function(e){return o.onClickBlock(o.index,e)}),innerHTML:o.marked(o.block.text)},null,8,["innerHTML"]),o.menuPosition?(Object(r["s"])(),Object(r["d"])(i,{key:1,pos:o.menuPosition,text:o.block.text,onClose:o.closeMenu},null,8,["pos","text","onClose"])):Object(r["e"])("",!0)],12,["data-index","data-id","data-temp_id"])}n("466d");function K(e,t,n,o,c,a){return Object(r["s"])(),Object(r["d"])("div",null," menu... ")}n("a9e3");var H=Object(r["w"])({selectedIndex:0}),q={ArrowDown:function(){H.selectedIndex++},ArrowUp:function(){H.selectedIndex--},Enter:function(e){return console.log("enter"),e.preventDefault(),!1},Escape:function(){console.log("esc"),F()}},F=function(){console.log("context",context),context.emit("close")},J={props:{pos:{type:Number,required:!0},text:{type:String}},onKeydown:function(e,t){return"function"!==typeof q[e]||q[e](t)},setup:function(e,t){return console.log("p",e),{closeMenu:F}}};J.render=K;var $=J,Z={props:["index","block"],components:{ContextMenu:$},setup:function(e,t){var n=Object(b["d"])(),o=e.block,c=e.index,a=Object(r["w"])({note:{blocks:[],references:[]},menuPosition:null,selectedIndex:Object(r["b"])((function(){return kt.state.selectedIndex})),textareaDOM:Object(r["b"])((function(){return kt.state.textareaDOM}))}),i={CtrlEnter:function(e){x()},CtrlB:function(e){d(e)},CtrlI:function(e){O(e)},"/":function(e){a.menuPosition=f()},"[":function(e){l("]")},"Shift(":function(e){l(")")}},s=function(){a.menuPosition=null},l=function(e){var t=a.textareaDOM.selectionStart;o.text=o.text.substring(0,t)+e+o.text.substring(t),Object(r["m"])((function(){a.textareaDOM.selectionStart=a.textareaDOM.selectionEnd=t}))},u=function(e,t){var n=a.textareaDOM.selectionStart,r=a.textareaDOM.selectionEnd,c=e.length;o.text=o.text.substring(0,n)+e+o.text.substring(n),o.text=o.text.substring(0,r+c)+e+o.text.substring(r+c),a.textareaDOM.selectionStart=n+c,a.textareaDOM.selectionEnd=r+c,t&&t.preventDefault()},d=function(e){u("**",e)},O=function(e){u("*",e)};function f(e){return a.textareaDOM?void 0===e?a.textareaDOM.selectionStart:(a.textareaDOM.selectionStart=e,void(a.textareaDOM.selectionEnd=e)):0}var p=function(e){return{marginLeft:"".concat(20*e,"px")}},g=function(e){Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log({onKeydown:e});var n="";e.ctrlKey&&(n+="Ctrl"),e.shiftKey&&(n+="Shift"),e.altKey&&(n+="Alt"),n+=e.key,Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log({command:n}),a.menuPosition&&!1===$.onKeydown(n,e)||("function"===typeof i[n]&&i[n](e),t.emit("onKeydown",e))},j=function(e){Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log("position",e),Object(r["m"])((function(){a.textareaDOM?(a.textareaDOM.focus(),f(e),v()):console.error("Textarea not found")}))},v=function(){a.textareaDOM.style.height="1.5em",a.textareaDOM.style.height="".concat(a.textareaDOM.scrollHeight,"px")},m=function(e){kt.state.selectedIndex=e;var t=window.getSelection().getRangeAt(0).endOffset;j(t)},h=function(e,t){if(!t.target.matches(".checkbox"))return t.target.matches(".reference")?(t.preventDefault(),void n.push({path:t.target.href})):void m(e,t);y(o)},x=function(){var e=o.text;e.match(/^\[\[(TODO|DONE)\]\]/)?e.match(/^\[\[TODO\]\]/)?e=e.replace(/^\[\[TODO\]\]/,"[[DONE]]"):e.match(/^\[\[DONE\]\]/)&&(e=e.replace(/^\[\[DONE\]\] */,"")):e="[[TODO]] "+e,o.text=e},y=function(e){var t=e.text;t.match(/^\[\[TODO\]\]/)?t=t.replace(/^\[\[TODO\]\]/,"[[DONE]]"):t.match(/^\[\[DONE\]\]/)&&(t=t.replace(/^\[\[DONE\]\]/,"[[TODO]]")),e.text=t},E=function(e){if(!e)return"";e=e.replace(/^\[\[TODO\]\]/,'<span class="checkbox"></span>'),e=e.replace(/^\[\[DONE\]\]/,'<span class="checkbox checked"></span>'),e=e.replace(/\*\*([^\*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/__([^_]+)__/g,"<strong>$1</strong>"),e=e.replace(/~~([^~]+)~~/g,"<del>$1</del>"),e=e.replace(/\*([^\*]+)\*/g,"<em>$1</em>"),e=e.replace(/_([^_]+)_/g,"<em>$1</em>");var t=e.match(/\[\[([^\]]+)\]\]/g);return t&&t.forEach((function(t){var n=t.replace(/[\[\]]/g,""),r=kt.state.notes.find((function(e){return e.name==n}));r&&(e=e.replace(t,'<a class="reference" href="/'.concat(r.slug,'">').concat(t,"</a>")))})),e},_=Object(r["C"])(a),P=_.selectedIndex,k=_.menuPosition,S=Object(r["C"])(kt.state),w=S.textareaDOM;return{selectedIndex:P,styleBlock:p,textareaDOM:w,marked:E,onClickBlock:h,setInputHeight:v,onKeydown:g,block:o,index:c,menuPosition:k,closeMenu:s}}};Z.render=z;var G=Z,Q=Object(r["L"])("data-v-1e57fe26");Object(r["v"])("data-v-1e57fe26");var W={key:0,viewBox:"0 0 24 24"},X=Object(r["g"])("path",{fill:"currentColor",d:"M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z"},null,-1),Y={key:1,viewBox:"0 0 24 24"},ee=Object(r["g"])("path",{fill:"currentColor",d:"M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z"},null,-1),te={key:2,viewBox:"0 0 24 24"},ne=Object(r["g"])("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"},null,-1),re={key:3,viewBox:"0 0 24 24"},oe=Object(r["g"])("path",{fill:"currentColor",d:"M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z"},null,-1),ce={key:4,viewBox:"0 0 24 24"},ae=Object(r["g"])("path",{fill:"currentColor",d:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"},null,-1);Object(r["t"])();var ie=Q((function(e,t,n,o,c,a){return Object(r["s"])(),Object(r["d"])("span",{style:a.icoStyle},["undo"==n.ico?(Object(r["s"])(),Object(r["d"])("svg",W,[X])):Object(r["e"])("",!0),"redo"==n.ico?(Object(r["s"])(),Object(r["d"])("svg",Y,[ee])):Object(r["e"])("",!0),"loading"==n.ico?(Object(r["s"])(),Object(r["d"])("svg",te,[ne])):Object(r["e"])("",!0),"star-empty"==n.ico?(Object(r["s"])(),Object(r["d"])("svg",re,[oe])):Object(r["e"])("",!0),"star"==n.ico?(Object(r["s"])(),Object(r["d"])("svg",ce,[ae])):Object(r["e"])("",!0)],4)})),se={props:["ico","size"],computed:{icoStyle:function(){return{display:"inline-block",width:this.size+"px",height:this.size+"px"}}}};n("52bd");se.render=ie,se.__scopeId="data-v-1e57fe26";var le=se,ue={components:{ListReferences:T,BlockElement:G,Ico:le},props:["slug"],setup:function(e,t){var n=null,o=Object(r["w"])({note:{blocks:[],references:[]},selectedIndex:Object(r["b"])((function(){return kt.state.selectedIndex})),textareaDOM:Object(r["b"])((function(){return kt.state.textareaDOM})),currentBlock:Object(r["b"])((function(){return o.note.blocks[o.selectedIndex]})),nextBlock:Object(r["b"])((function(){return o.note.blocks[o.selectedIndex+1]})),previusBlock:Object(r["b"])((function(){return o.note.blocks[o.selectedIndex-1]})),historyCursor:-1,history:[],historyDisabled:!1,edited:!1,lastSavedTime:null,version:"0"}),c={ArrowUp:function(e){if(o.previusBlock&&h()){e.preventDefault(),kt.state.selectedIndex--;var t=j()+m();k(t)}},ArrowDown:function(e){if(o.nextBlock&&x()){var t=j()-m();t=Math.min(t,o.nextBlock.text.split("\n")[0].length),kt.state.selectedIndex++,k(t)}},ShiftAltArrowUp:function(e){o.previusBlock&&(e.preventDefault(),P(o.selectedIndex-1,E()),kt.state.selectedIndex--,_(),k(j()))},ShiftAltArrowDown:function(e){o.nextBlock&&(e.preventDefault(),P(o.selectedIndex+1,E()),kt.state.selectedIndex++,_(),k(j()))},Tab:function(e){e.preventDefault(),o.previusBlock&&(o.currentBlock.level=Math.min(o.previusBlock.level+1,o.currentBlock.level+1))},ShiftTab:function(e){e.preventDefault(),o.previusBlock&&(o.currentBlock.level=Math.max(o.currentBlock.level-1,0))},Delete:function(e){if(j()===o.currentBlock.text.length&&o.nextBlock){e.preventDefault();var t=o.currentBlock.text.length;o.currentBlock.text+=o.nextBlock.text,E(1),k(t)}},ShiftDelete:function(e){e.preventDefault(),E(),k(0)},Backspace:function(e){if(0===o.textareaDOM.selectionEnd&&o.previusBlock){e.preventDefault();var t=o.previusBlock.text.length;o.previusBlock.text+=o.currentBlock.text,E(),kt.state.selectedIndex--,k(t)}},Enter:function(e){e.preventDefault();var t=j(),n=o.currentBlock.text.substr(0,t),r=o.currentBlock.text.substr(t);o.currentBlock.text=n;var c={text:r,parent_id:o.currentBlock.parent_id,level:o.currentBlock.level,temp_id:"temp".concat((new Date).getTime())};P(o.selectedIndex+1,c),kt.state.selectedIndex++,k(0)}},a=Object(r["b"])((function(){return!(o.historyCursor!=o.history.length-1||!o.edited)||o.historyCursor>0})),i=Object(r["b"])((function(){return o.edited})),s=Object(r["b"])((function(){return o.historyCursor<o.history.length-1})),l=Object(r["b"])((function(){return"Saving"==o.lastSavedTime})),u=Object(r["b"])((function(){if("Saving"==o.lastSavedTime)return"Saving...";if(null===o.lastSavedTime)return"";var e=o.lastSavedTime,t=("0"+e.getHours()).substr(-2),n=("0"+e.getMinutes()).substr(-2),r=("0"+e.getSeconds()).substr(-2);return"".concat(t,":").concat(n,":").concat(r)})),b=function(e){1==e&&1==o.edited||(o.edited=e,1==e&&(clearTimeout(n),n=setTimeout((function(){A()}),5e3)))},O=function(){if(a){if(o.edited&&o.historyCursor==o.history.length-1){var e=o.historyCursor;return g(),o.historyCursor=e,f(o.history[o.historyCursor]),void b(!1)}0!=o.historyCursor&&(o.historyDisabled=!0,o.historyCursor--,f(o.history[o.historyCursor]),o.historyDisabled=!1)}},f=function(e){Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log("reload",JSON.parse(e)),o.note.blocks=JSON.parse(e),o.version=(new Date).getTime(),b(!0)},p=function(){s&&(o.historyDisabled=!0,o.historyCursor++,f(o.history[o.historyCursor]),o.historyDisabled=!1)},g=function(){Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log("pushHistory");var e=JSON.stringify(o.note.blocks);o.historyDisabled||e===o.history[o.historyCursor]||(o.historyCursor++,o.history.splice(o.historyCursor,o.history.length-o.historyCursor,e))};function j(e){return o.textareaDOM?void 0===e?o.textareaDOM.selectionStart:(o.textareaDOM.selectionStart=e,void(o.textareaDOM.selectionEnd=e)):0}var v=function(e,t){var n=e.temp_id?"temp_id-".concat(e.temp_id):"id-".concat(e.id);return"index-".concat(t,"-").concat(n,"-h").concat(o.version)},m=function(){var e=o.currentBlock.text.split("\n");return e.pop(),e.join("\n").length},h=function(){var e=o.currentBlock.text.split("\n");return e[0].length>=j()},x=function(){var e=o.currentBlock.text.split("\n");return e.pop(),e.join("\n").length<=j()},y=function(e){if(!["Alt","Shift","Ctrl"].includes(e.key)){b(!0);var t="";e.ctrlKey&&(t+="Ctrl"),e.shiftKey&&(t+="Shift"),e.altKey&&(t+="Alt"),t+=e.key,"function"===typeof c[t]&&(Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log("Key down: ".concat(t,"\n---")),c[t](e))}},E=function(e){e||(e=0);var t=o.note.blocks.splice(o.selectedIndex+e,1);return _(),t[0]},_=function(){var e={level:0};o.note.blocks[0].level=0,o.note.blocks.forEach((function(t){t.level-e.level>1&&(t.level=e.level+1),e=t}))},P=function(e,t){o.note.blocks.splice(e,0,t)},k=function(e){Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log("position",e),Object(r["m"])((function(){Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log("textarea depois",o.textareaDOM),o.textareaDOM.focus(),j(e),S()}))},S=function(){o.textareaDOM.style.height="1.5em",o.textareaDOM.style.height="".concat(o.textareaDOM.scrollHeight,"px")},w=function(){o.note.is_favorite=!o.note.is_favorite,d()({method:"post",url:"/api/notes/"+o.note.id,data:{is_favorite:o.note.is_favorite}}).then((function(e){kt.getNotesIndex()})).catch((function(e){console.error(e)}))},A=function(){clearTimeout(n),o.lastSavedTime="Saving",b(!1),_();var e=o.note.id,t=o.note.blocks,r=[];t.forEach((function(e,t){r[e.level]=e.id||e.temp_id,e.parent_id=0==e.level?null:r[e.level-1],e.order=t})),Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log(t),d()({method:"post",url:"/api/notes/save-blocks/"+e,data:t}).then((function(e){Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log(e),B(e.data.temp_ids),g(),kt.state.notes=[].concat(Object(V["a"])(e.data.new_notes),Object(V["a"])(kt.state.notes)),o.lastSavedTime=new Date})).catch((function(e){console.error("save error"),console.error(e)}))},B=function(e){for(var t in e){var n=o.note.blocks.find((function(e){return e.temp_id==t}));n.id=e[t],Object({NODE_ENV:"production",VUE_APP_BASEAPI:"/api/",VUE_APP_PROTOCOL:"https",VUE_APP_BASEURL:"'bullettext.com",BASE_URL:"/"}).VUE_APP_VERBOSE&&console.log("".concat(t," updated to id ").concat(n.id))}};Object(r["q"])((function(){kt.getNote(e.slug).then((function(e){if(o.note=e.data,0==e.data.blocks.length){var t={text:"",level:0,temp_id:"temp".concat((new Date).getTime())};e.data.blocks.push(t),kt.state.selectedIndex=0,k(0)}else kt.state.selectedIndex=0,e.data.blocks[0].text?k(e.data.blocks[0].text.length):k(0);g()}))})),Object(r["o"])((function(){o.edited&&A()}));var U=Object(r["C"])(o),I=U.note,D=U.history,L=U.historyCursor,C=Object(r["C"])(kt.state);C.selectedIndex;return{note:I,keyElement:v,onKeydown:y,saveAll:A,infoSaved:u,undo:O,redo:p,canUndo:a,canRedo:s,isSaving:l,canSave:i,history:D,historyCursor:L,toggleFavorite:w}}};ue.render=L;var de=ue,be={class:"container"},Oe=Object(r["g"])("h1",{class:"mt-5 mb-3 text-center"},"Bullet Text",-1),fe={key:0,class:"alert alert-danger"},pe={class:"row"},ge={class:"col-lg-6"},je={class:"card"},ve=Object(r["g"])("div",{class:"card-header"},"Login",-1),me={class:"card-body"},he={class:"form-group"},xe={class:"form-group"},ye={class:"form-text text-muted text-right"},Ee=Object(r["f"])("forgot password"),_e=Object(r["g"])("button",{class:"btn btn-primary",type:"submit"},"Login",-1),Pe={class:"col-lg-6"},ke={class:"card"},Se=Object(r["g"])("div",{class:"card-header"},"Register",-1),we={class:"card-body"},Ae={class:"form-group"},Be={class:"form-group"},Ue={class:"form-group"},Ie=Object(r["g"])("button",{class:"btn btn-primary",type:"submit"},"Register",-1);function De(e,t,n,o,c,a){var i=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["d"])("div",be,[Oe,o.error?(Object(r["s"])(),Object(r["d"])("div",fe,Object(r["B"])(o.error),1)):Object(r["e"])("",!0),Object(r["g"])("div",pe,[Object(r["g"])("div",ge,[Object(r["g"])("div",je,[ve,Object(r["g"])("div",me,[Object(r["g"])("form",{onSubmit:t[3]||(t[3]=Object(r["K"])((function(){return o.onSubmitLogin&&o.onSubmitLogin.apply(o,arguments)}),["prevent"]))},[Object(r["g"])("div",he,[Object(r["I"])(Object(r["g"])("input",{type:"email",placeholder:"E-mail",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.login.email=e}),required:""},null,512),[[r["E"],o.login.email]])]),Object(r["g"])("div",xe,[Object(r["I"])(Object(r["g"])("input",{type:"password",placeholder:"Password",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.login.password=e}),required:""},null,512),[[r["E"],o.login.password]]),Object(r["g"])("small",ye,[Object(r["g"])(i,{to:"forgot"},{default:Object(r["H"])((function(){return[Ee]})),_:1})])]),_e],32)])])]),Object(r["g"])("div",Pe,[Object(r["g"])("div",ke,[Se,Object(r["g"])("div",we,[Object(r["g"])("form",{onSubmit:t[7]||(t[7]=Object(r["K"])((function(){return o.onSubmitRegister&&o.onSubmitRegister.apply(o,arguments)}),["prevent"]))},[Object(r["g"])("div",Ae,[Object(r["I"])(Object(r["g"])("input",{type:"text",placeholder:"Name","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.register.name=e}),class:"form-control",required:""},null,512),[[r["E"],o.register.name]])]),Object(r["g"])("div",Be,[Object(r["I"])(Object(r["g"])("input",{type:"text",placeholder:"E-mail","onUpdate:modelValue":t[5]||(t[5]=function(e){return o.register.email=e}),class:"form-control",required:""},null,512),[[r["E"],o.register.email]])]),Object(r["g"])("div",Ue,[Object(r["I"])(Object(r["g"])("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[6]||(t[6]=function(e){return o.register.password=e}),class:"form-control",required:""},null,512),[[r["E"],o.register.password]])]),Ie],32)])])])])])}var Le={setup:function(){var e=Object(b["d"])(),t=Object(r["w"])({error:"",login:{email:"",password:""},register:{name:"",email:"",password:""}}),n=function(){t.error="",d()({method:"post",url:"/api/login",data:t.login}).then((function(t){kt.setUser(t.data);var n=kt.state.intendedUrl;"/login"!=n&&n||(n="/"),e.push({path:n})})).catch((function(e){t.error=e.response.data}))},o=function(){t.error="",d()({method:"post",url:"/api/register",data:t.register}).then((function(t){kt.setUser(t.data);var n=kt.state.intendedUrl;"/login"!=n&&n||(n="/"),e.push({path:n})})).catch((function(e){t.error=e.response.data}))};Object(r["q"])((function(){console.log("login")}));var c=Object(r["C"])(t),a=c.error,i=c.login,s=c.register;return{store:kt,router:e,error:a,login:i,register:s,onSubmitLogin:n,onSubmitRegister:o}}};Le.render=De;var Ve=Le,Ce=Object(r["L"])("data-v-6e1ae4d9");Object(r["v"])("data-v-6e1ae4d9");var Me={class:"container"},Re=Object(r["g"])("h1",{class:"mt-5 mb-3 text-center"},"Bullet Text",-1),Ne={key:0,class:"alert alert-danger"},Te={class:"w-50 mx-auto"},ze={class:"card"},Ke=Object(r["g"])("div",{class:"card-header"},"Password recovery",-1),He={class:"card-body"},qe={class:"form-group"},Fe=Object(r["g"])("label",null,"E-mail",-1),Je=Object(r["g"])("button",{type:"submit",class:"btn btn-primary"},"Recover",-1),$e={class:"text-center mt-3"},Ze=Object(r["f"])("Back to login");Object(r["t"])();var Ge=Ce((function(e,t,n,o,c,a){var i=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["d"])("div",Me,[Re,c.error?(Object(r["s"])(),Object(r["d"])("div",Ne,Object(r["B"])(c.error),1)):Object(r["e"])("",!0),Object(r["g"])("div",Te,[Object(r["g"])("div",ze,[Ke,Object(r["g"])("div",He,[Object(r["g"])("form",{onSubmit:t[2]||(t[2]=Object(r["K"])((function(){return a.onSubmit&&a.onSubmit.apply(a,arguments)}),["prevent"]))},[Object(r["g"])("div",qe,[Fe,Object(r["I"])(Object(r["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.login.email=e}),required:""},null,512),[[r["E"],c.login.email]])]),Je],32)])]),Object(r["g"])("p",$e,[Object(r["g"])(i,{to:"login"},{default:Ce((function(){return[Ze]})),_:1})])])])})),Qe={data:function(){return{error:"",login:{email:""}}},methods:{onSubmit:function(){var e=this;this.error="",d()({method:"post",url:"/api/forgot",data:this.login}).then((function(e){alert("mensagem enviada")})).catch((function(t){e.error=t.response.data}))}},mounted:function(){}};Qe.render=Ge,Qe.__scopeId="data-v-6e1ae4d9";var We=Qe,Xe=Object(r["L"])("data-v-52fcf5f6");Object(r["v"])("data-v-52fcf5f6");var Ye={class:"container"},et=Object(r["g"])("h1",{class:"mt-5 mb-3 text-center"},"Bullet Text",-1),tt={key:0,class:"alert alert-danger"},nt={class:"w-50 mx-auto"},rt={class:"card"},ot=Object(r["g"])("div",{class:"card-header"},"Set a new password",-1),ct={class:"card-body"},at={class:"form-group"},it=Object(r["g"])("label",null,"E-mail",-1),st={class:"form-group"},lt=Object(r["g"])("label",null,"New password",-1),ut=Object(r["g"])("button",{type:"submit",class:"btn btn-primary"},"Save",-1);Object(r["t"])();var dt=Xe((function(e,t,n,o,c,a){return Object(r["s"])(),Object(r["d"])("div",Ye,[et,c.error?(Object(r["s"])(),Object(r["d"])("div",tt,Object(r["B"])(c.error),1)):Object(r["e"])("",!0),Object(r["g"])("div",nt,[Object(r["g"])("div",rt,[ot,Object(r["g"])("div",ct,[Object(r["g"])("form",{onSubmit:t[3]||(t[3]=Object(r["K"])((function(){return a.onSubmit&&a.onSubmit.apply(a,arguments)}),["prevent"]))},[Object(r["g"])("div",at,[it,Object(r["I"])(Object(r["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.login.email=e}),readonly:""},null,512),[[r["E"],c.login.email]])]),Object(r["g"])("div",st,[lt,Object(r["I"])(Object(r["g"])("input",{type:"password",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.login.password=e})},null,512),[[r["E"],c.login.password]])]),ut],32)])])])])})),bt=(n("841c"),{data:function(){return{error:"",login:{email:"",password:"",token:""}}},methods:{onSubmit:function(){var e=this;this.error="",d()({method:"post",url:"/api/new-password",data:this.login}).then((function(t){alert("New password successfully set"),e.$router.push("login")})).catch((function(t){e.error=t.response.data}))}},mounted:function(){var e=window.location.search.replace(/^\?/,""),t=e.split("&"),n={};for(var r in t){var o=t[r].split("=");n[o[0]]=o[1]}this.login.email=decodeURIComponent(n.email),this.login.token=decodeURIComponent(n.token)}});bt.render=dt,bt.__scopeId="data-v-52fcf5f6";var Ot=bt,ft=Object(b["a"])({history:Object(b["b"])("/"),routes:[{path:"/login",name:"login",component:Ve,props:!0,meta:{restricted:!1}},{path:"/forgot",name:"forgot",component:We,props:!0,meta:{restricted:!1}},{path:"/new-password",name:"new-password",component:Ot,props:!0,meta:{restricted:!1}},{path:"/",name:"dashboard",component:x,meta:{restricted:!0},children:[{path:"/",name:"list",component:S,meta:{restricted:!0}},{path:"/:slug",name:"note",component:de,props:!0,meta:{restricted:!0}}]}]});ft.beforeEach((function(e,t,n){return console.log("route before each to: ",e.path),"/logout"==e.path?(d()({method:"get",url:"/api/logout"}).then((function(e){kt.setUser({})})).catch((function(e){console.log("error",e)})),n("/login")):(console.log("store.isAuthenticated",kt.state.isAuthenticated),!kt.state.isAuthenticated&&e.meta.restricted?(console.log("next login"),kt.setIntendedUrl(e.path),n("/login")):void n())}));var pt=ft,gt=Object(r["w"])({user:{id:null,email:"",is_admin:!1},authInitialized:!1,intendedUrl:"",notes:[],note:{},blocks:[],loading:0,loadingMessage:"",selectedIndex:-1,textareaDOM:null,isAuthenticated:Object(r["b"])((function(){return gt.authInitialized&&gt.user&&gt.user.id}))}),jt=function(){gt.loading+=1},vt=function(){gt.loading>0&&(gt.loading-=1),0==gt.loading&&gt.loadingMessage&&mt("")},mt=function(e){gt.loadingMessage=e},ht=function(e){gt.user=e},xt=function(e){gt.intendedUrl=e},yt=function(){gt.authInitialized=!0},Et=function(){jt(),d()({url:"/api/notes"}).then((function(e){gt.notes=e.data})).finally((function(){vt()}))},_t=function(e){return jt(),d()({url:"/api/notes/"+e}).then((function(e){return e})).catch((function(e){console.error("No permisson to view this project","Error","#cc0000"),pt.replace("/")})).finally((function(){vt()}))},Pt=function(e){jt();var t={name:e};return d()({method:"post",url:"/api/notes",data:t}).then((function(e){return pt.push({path:e.data.slug}),Et(),e})).finally((function(){vt()}))},kt={state:gt,getNote:_t,startLoading:jt,getNotesIndex:Et,authInitialized:yt,setUser:ht,setIntendedUrl:xt,newNote:Pt},St={setup:function(){var e=Object(r["b"])((function(){return kt.state.loading})),t=Object(r["b"])((function(){return kt.state.loadingMessage}));return{isLoading:e,loadingMessage:t}}};n("6a59");St.render=l;var wt=St,At={components:{Loader:wt},setup:function(){var e=Object(b["c"])();Object(r["q"])((function(){}));var t=Object(r["C"])(kt.state),n=t.loading;return{startLoading:kt.startLoading,loading:n,fullPath:e.fullPath}}};At.render=c;var Bt=At;n("7d05");window.Vue=r["default"],d()({method:"get",url:"/api/user"}).then((function(e){kt.setUser(e.data)})).catch((function(){})).finally((function(){kt.authInitialized();var e=Object(r["c"])(Bt);e.use(pt),e.mount("#app")}))},"6a59":function(e,t,n){"use strict";n("106d")},"7d05":function(e,t,n){},"9e10":function(e,t,n){}});
//# sourceMappingURL=app.feb5f23e.js.map